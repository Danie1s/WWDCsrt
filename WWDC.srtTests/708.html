<!DOCTYPE html>
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

	<meta charset="utf-8" />
<meta name="Author" content="Apple Inc." />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" href="/favicon.ico" />
<link rel="mask-icon" href="/apple-logo.svg" color="#333333">

<link rel="stylesheet" href="/assets/styles/globalnav.css?1" type="text/css" />
<link rel="stylesheet" href="/assets/styles/global.dist.css" type="text/css" />

<script src="/assets/scripts/lib/jquery/jquery-1.11.0.min.js"></script>
<script src="/assets/scripts/lib/jquery/jquery.retinate.js"></script>
<script src="/assets/scripts/global.js"></script>
<script src="/assets/scripts/global-logout.js"></script>
	<link rel="stylesheet" href="https://www.apple.com/wss/fonts?family=SF+Pro&v=2" type="text/css" />
<link rel="stylesheet" href="https://www.apple.com/wss/fonts?family=SF+Pro+Icons&v=1" type="text/css" />
<link rel="stylesheet" href="https://www.apple.com/wss/fonts?family=SF+Mono&v=2" type="text/css" />
<link rel="stylesheet" href="https://www.apple.com/wss/fonts?family=Apple+Icons&amp;v=1" type="text/css" />

		<meta name="omni_page" content="Debugging Energy Issues - WWDC 2015 - Videos" />
	<title>Debugging Energy Issues - WWDC 2015 - Videos - Apple Developer</title>
		<meta name="robots" content="noodp,noydir" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<link type="text/css" rel="stylesheet" href="/videos/styles/videos.css">
	<meta name="description" content="Learn how to debug energy issues in your app. See the energy debugging tools on iOS and walk through debugging common energy issues in a...">

	<meta property="og:url" content="developer.apple.com/videos/play/wwdc2015/708/" />
	<meta property="og:title" content="Debugging Energy Issues - WWDC 2015 - Videos - Apple Developer" />
	<meta property="og:description" content="Learn how to debug energy issues in your app. See the energy debugging tools on iOS and walk through debugging common energy issues in a..." />
	<meta property="og:site_name" content="Apple Developer" />
	<meta property="og:type" content="website" />
		<meta property="og:image" content="https://devimages-cdn.apple.com/wwdc-services/images/2/603/603_wide_250x141_2x.jpg" />
		<meta property="og:locale" content="en_US" />

</head>
<body class="view-play">

	<aside id="ac-gn-segmentbar" class="ac-gn-segmentbar" lang="en-US" dir="ltr">
</aside>
<input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate" />
<nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global Navigation" data-hires="false" data-analytics-region="global nav" lang="en-US" dir="ltr" data-store-locale="us" data-store-api="/[storefront]/shop/bag/status" data-search-locale="en_US" data-search-api="/search-services/suggestions/">
	<div class="ac-gn-content">
		<ul class="ac-gn-header">
			<li class="ac-gn-item ac-gn-menuicon">
				<label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
					<span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
						<span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
					</span>
					<span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
						<span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
					</span>
				</label>
				<a href="#ac-gn-menustate" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open">
					<span class="ac-gn-menuanchor-label">Open Menu</span>
				</a>
				<a href="#" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close">
					<span class="ac-gn-menuanchor-label">Close Menu</span>
				</a>
			</li>
			<li class="ac-gn-item ac-gn-apple">
				<a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus-small">
					<span class="ac-gn-link-text">Apple Developer</span>
				</a>
			</li>
		</ul>
		<div class="ac-gn-search-placeholder-container" role="search">
			<div class="ac-gn-search ac-gn-search-small">
				<a id="ac-gn-link-search-small" class="ac-gn-link" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer">
					<div class="ac-gn-search-placeholder-bar">
						<div class="ac-gn-search-placeholder-input">
							<div class="ac-gn-search-placeholder-input-text" aria-hidden="true">
								<div class="ac-gn-link-search ac-gn-search-placeholder-input-icon"></div>
								<span class="ac-gn-search-placeholder">Search Developer</span>
							</div>
						</div>
						<div class="ac-gn-searchview-close ac-gn-searchview-close-small ac-gn-search-placeholder-searchview-close">
							<span class="ac-gn-searchview-close-cancel" aria-hidden="true">Cancel</span>
						</div>
					</div>
				</a>
			</div>
		</div>
		<ul class="ac-gn-list">
			<li class="ac-gn-item ac-gn-apple">
				<a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus">
					<span class="ac-gn-link-text">Apple Developer</span>
				</a>
			</li>
			<li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
				<a class="ac-gn-link ac-gn-link-discover" href="/discover/" data-analytics-title="discover">
					<span class="ac-gn-link-text">Discover</span>
				</a>
			</li>
			<li class="ac-gn-item ac-gn-item-menu ac-gn-design">
				<a class="ac-gn-link ac-gn-link-design" href="/design/" data-analytics-title="design">
					<span class="ac-gn-link-text">Design</span>
				</a>
			</li>
			<li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
				<a class="ac-gn-link ac-gn-link-develop" href="/develop/" data-analytics-title="develop">
					<span class="ac-gn-link-text">Develop</span>
				</a>
			</li>
			<li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
				<a class="ac-gn-link ac-gn-link-distribute" href="/distribute/" data-analytics-title="distribute">
					<span class="ac-gn-link-text">Distribute</span>
				</a>
			</li>
			<li class="ac-gn-item ac-gn-item-menu ac-gn-dsupport">
				<a class="ac-gn-link ac-gn-link-dsupport" href="/support/" data-analytics-title="dsupport">
					<span class="ac-gn-link-text">Support</span>
				</a>
			</li>
			<li class="ac-gn-item ac-gn-item-menu ac-gn-account">
				<a class="ac-gn-link ac-gn-link-account" href="/account/" data-analytics-title="account">
					<span class="ac-gn-link-text">Account</span>
				</a>
			</li>
			<li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
				<a id="ac-gn-link-search" class="ac-gn-link ac-gn-link-search" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer"></a>
			</li>
		</ul>
		<aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
			<div class="ac-gn-searchview-content">
				<div class="ac-gn-searchview-bar">
					<div class="ac-gn-searchview-bar-wrapper">
						<form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
							<div class="ac-gn-searchform-wrapper">
								<input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" aria-label="Search Developer" placeholder="Search Developer" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" />
								<button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit Search"></button>
								<button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search">
									<span class="ac-gn-searchform-reset-background"></span>
								</button>
							</div>
						</form>
						<button id="ac-gn-searchview-close-small" class="ac-gn-searchview-close ac-gn-searchview-close-small" aria-label="Cancel Search">
							<span class="ac-gn-searchview-close-cancel" aria-hidden="true">
								Cancel
							</span>
						</button>
					</div>
				</div>
				<aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults=""></aside>
			</div>
			<button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Cancel Search">
				<span class="ac-gn-searchview-close-wrapper">
					<span class="ac-gn-searchview-close-left"></span>
					<span class="ac-gn-searchview-close-right"></span>
				</span>
			</button>
		</aside>
	</div>
</nav>
<div class="ac-gn-blur"></div>
<div id="ac-gn-curtain" class="ac-gn-curtain"></div>
<div id="ac-gn-placeholder" class="ac-nav-placeholder"></div>
<script src="/assets/scripts/ac-globalnav.built.js"></script>

			<!-- metrics -->
<script>
    /* RSID: */
    var s_account="awdappledeveloper"
</script>	
<script src="/assets/metrics/scripts/analytics.js"></script>
<script>
    s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
    s.channel="www.en.developer"
    s.channel="www.videos.developer";

    
    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)
</script>
<!-- /metrics -->	
	<main id="main" class="main theme-dark" role="main">

		<section class="bg-dark">

			<section class="grid">

				<section class="row">
					<section class="column large-10 small-12  padding-top-small large-centered no-padding-bottom">
						<!-- back link -->
						<p class="back-link smaller">
														<a class="arrow-left" href="/videos/">More Videos</a>
													</p>
					</section>
				</section>

				<!-- video player -->
				<section class="video-wrapper row">
					<section class="column large-10 small-12  padding-top-small padding-bottom-small large-centered">
												<video id="video" class="video large-centered" controls="" src="https://devstreaming-cdn.apple.com/videos/wwdc/2015/708xzs0dtwx/708/hls_vod_mvp.m3u8" autoplay data-id="39">
							
						</video>
						<div class="no-video-banner hidden">
							<div class="no-video-copy">
								<p>Streaming is available in most browsers,<br> and in the WWDC app.</p>
							</div>
							</span>
						</div>
											</section>
				</section>

			</section>

		</section>

		<section class="grid">

			<!-- tab menu -->
			<section class="tab-menu row divider-bottom">

				<section class="column large-10 small-12  padding-top-small padding-bottom-small large-centered">

					<ul class="tabs">
						<li class="tab" data-supplement-id="details"><a href="#"><span class="smaller">Overview</span></a></li>

												<li class="tab" data-supplement-id="transcript"><a href="#"><span class="smaller">Transcript</span></a></li>
						<li class="tab right active" data-supplement-id="search">
							<!-- mobile search -->
							<a href="#"><span><!--icon--></span></a>
							<!-- desktop search -->
							<section class="searchbar-wrapper desktop" style="opacity:0;">
								<button class="search-icon"></button>
								<input class="active" type="text" autocomplete="off" autofocus="" placeholder="Search this video…">
							</section>
						</li>
						
												<section class="searchbar-wrapper mobile" style="">
							<input class="active" type="text" autocomplete="off" autofocus="" placeholder="Search this video…">
						</section>
						
					</ul>
				</section>

			</section>

			<!-- supplements -->
			<section class="row">

				<section class="column large-10 small-12  large-centered no-padding-top no-padding-bottom">

					<ul class="supplements hidden">

						<!-- details -->
						<li class="supplement details " data-supplement-id="details">
							
							<h1>Debugging Energy Issues</h1>
							<p>Learn how to debug energy issues in your app. See the energy debugging tools on iOS and walk through debugging common energy issues in a sample app.</p>
							<p class="smaller lighter">WWDC 2015 - Session 708
							 - iOS, macOS</p>

														<h2>Resources</h2>

							<ul class="links small">
								
																	<li class="download">
										<ul class="options">
																						<li><a href="https://devstreaming-cdn.apple.com/videos/wwdc/2015/708xzs0dtwx/708/708_hd_debugging_energy_issues.mp4?dl=1">HD Video</a></li>
																																	<li><a href="https://devstreaming-cdn.apple.com/videos/wwdc/2015/708xzs0dtwx/708/708_sd_debugging_energy_issues.mp4?dl=1">SD Video</a></li>
																					</ul>
									</li>
																
																										<li class="download"><a href="https://devstreaming-cdn.apple.com/videos/wwdc/2015/708xzs0dtwx/708/708_debugging_energy_issues.pdf?dl=1">Presentation Slides (PDF)</a></li>
																								</ul>
							
							
							
						</li>

						<!-- transcript -->
						<li class="supplement transcript" data-supplement-id="transcript" data-shortcut-base-url="/videos/play/wwdc2015-708/">
							<section>
								<div class="margin-bottom-small download-transcript"><span id="get-transcript" class="icon icon-before icon-downloadcircle">Download</span></div>
								<p><span class="sentence"><span data-start="28.0" data-end="28.0">  ABHINAV PATHAK: Hello.</span></span><span class="sentence"><span data-start="31.0" data-end="32.0"> Hello, everyone.</span></span><span class="sentence"><span data-start="32.0" data-end="33.0"> Good morning.</span></span></p><p><span class="sentence"><span data-start="34.0" data-end="37.0"> Hope you are having a great WWDC so far.</span></span><span class="sentence"><span data-start="37.0" data-end="40.0"> I'm Abhinav Pathak, along with my colleague, Pai-Han Huang, </span></span><span class="sentence"><span data-start="40.0" data-end="43.0"> we are going to talk about debugging energy issues.</span></span></p><p><span class="sentence"><span data-start="44.0" data-end="46.0"> We are going to show you the tools that we already have </span></span><span class="sentence"><span data-start="47.0" data-end="50.0"> and the new tools we built this year specifically for iOS, </span></span><span class="sentence"><span data-start="51.0" data-end="56.0"> using which you can find energy problems in your app and, two, </span></span><span class="sentence"><span data-start="56.0" data-end="60.0"> fix them so that your customers really like your app.</span></span><span class="sentence"><span data-start="60.0" data-end="61.0"> Let's begin.</span></span><span class="sentence"><span data-start="63.0" data-end="64.0"> The red battery icon.</span></span></p><p><span class="sentence"><span data-start="64.0" data-end="67.0"> How much we all hate it when it happens to us.</span></span><span class="sentence"><span data-start="68.0" data-end="69.0"> Customers also hate this.</span></span><span class="sentence"><span data-start="71.0" data-end="74.0"> Having a good battery life is really important </span></span><span class="sentence"><span data-start="74.0" data-end="77.0"> to having an awesome user experience.</span></span><span class="sentence"><span data-start="78.0" data-end="82.0"> Time and time again, it has come up that battery life is one </span></span><span class="sentence"><span data-start="82.0" data-end="84.0"> of the most important feature that people want.</span></span></p><p><span class="sentence"><span data-start="86.0" data-end="88.0"> At Apple, we take great strides </span></span><span class="sentence"><span data-start="88.0" data-end="92.0"> to ensure customers get a good battery life experience.</span></span><span class="sentence"><span data-start="92.0" data-end="97.0"> However, the apps the customer run have equal </span></span><span class="sentence"><span data-start="97.0" data-end="101.0"> or usually more say in how the energy is drained </span></span><span class="sentence"><span data-start="101.0" data-end="101.0"> from their device.</span></span><span class="sentence"><span data-start="103.0" data-end="107.0"> To help our customers understand which app is draining battery, </span></span><span class="sentence"><span data-start="107.0" data-end="110.0"> which app is heavy in terms of energy, a couple of years ago </span></span><span class="sentence"><span data-start="111.0" data-end="116.0"> on OS X side, we had an activity monitor monitor energy impact, </span></span><span class="sentence"><span data-start="116.0" data-end="119.0"> where you can see, for each and every app, </span></span><span class="sentence"><span data-start="119.0" data-end="122.0"> what is the instantaneous impact and what is the impact </span></span><span class="sentence"><span data-start="122.0" data-end="125.0"> for a period of time so that users can get, hey, </span></span><span class="sentence"><span data-start="125.0" data-end="126.0"> what happened on their device? </span></span><span class="sentence"><span data-start="127.0" data-end="131.0"> On iOS 8, last year we introduced battery usage UI, </span></span><span class="sentence"><span data-start="131.0" data-end="137.0"> a customer-facing UI, where they can go and see in last 24 hours, </span></span><span class="sentence"><span data-start="137.0" data-end="140.0"> and last 7 days, what is the proportion of energy breakdown </span></span><span class="sentence"><span data-start="140.0" data-end="143.0"> in different application that is they have used.</span></span><span class="sentence"><span data-start="144.0" data-end="148.0"> An app coming at the top could have very legitimate reasons, </span></span><span class="sentence"><span data-start="148.0" data-end="151.0"> hey, I love this app, I use it all the time.</span></span></p><p><span class="sentence"><span data-start="152.0" data-end="155.0"> To help customers understand what is the factor here, </span></span><span class="sentence"><span data-start="156.0" data-end="161.0"> this year we have included a single toggle at the top of it </span></span><span class="sentence"><span data-start="161.0" data-end="164.0"> where they can toggle and see how much usage there is, </span></span><span class="sentence"><span data-start="165.0" data-end="166.0"> how much screen time the app got, </span></span><span class="sentence"><span data-start="166.0" data-end="169.0"> and how much it ran in the background.</span></span><span class="sentence"><span data-start="169.0" data-end="172.0"> And then they can assess hey, I used it more, or hey, </span></span><span class="sentence"><span data-start="172.0" data-end="176.0"> this app consumes a lot of energy.</span></span><span class="sentence"><span data-start="176.0" data-end="180.0"> This talk is about if your app is coming on the top </span></span><span class="sentence"><span data-start="180.0" data-end="182.0"> of this list, how you can get it </span></span><span class="sentence"><span data-start="182.0" data-end="185.0"> down while maintaining the same utilization </span></span><span class="sentence"><span data-start="185.0" data-end="187.0"> or giving the same utility to your user.</span></span><span class="sentence"><span data-start="188.0" data-end="191.0"> This talk is also about people who usually come down, </span></span><span class="sentence"><span data-start="191.0" data-end="192.0"> how they can further come down </span></span><span class="sentence"><span data-start="193.0" data-end="195.0"> and get a good customer experience.</span></span><span class="sentence"><span data-start="196.0" data-end="199.0"> To give a high-level overview, we are going to quickly go </span></span><span class="sentence"><span data-start="199.0" data-end="201.0"> through energy fundamentals and best practices.</span></span><span class="sentence"><span data-start="201.0" data-end="204.0"> We are going to summarize the talk we had in the morning.</span></span><span class="sentence"><span data-start="204.0" data-end="208.0"> We are going to show you the energy debugging workflow </span></span><span class="sentence"><span data-start="208.0" data-end="211.0"> and the tools we have on how to debug energy.</span></span><span class="sentence"><span data-start="211.0" data-end="213.0"> We are going to have a demo </span></span><span class="sentence"><span data-start="213.0" data-end="216.0"> where we will fix energy problems in a sample app </span></span><span class="sentence"><span data-start="216.0" data-end="219.0"> that we have built specifically for this talk </span></span><span class="sentence"><span data-start="219.0" data-end="222.0"> and show you how easy it is to go ahead </span></span><span class="sentence"><span data-start="222.0" data-end="229.0"> and fix energy problems, and then we will close this talk.</span></span></p><p><span class="sentence"><span data-start="229.0" data-end="230.0"> Very simple.</span></span><span class="sentence"><span data-start="230.0" data-end="231.0"> Everybody knows this.</span></span><span class="sentence"><span data-start="231.0" data-end="232.0"> Energy 101.</span></span></p><p><span class="sentence"><span data-start="232.0" data-end="234.0"> Energy is equal to power times time.</span></span><span class="sentence"><span data-start="235.0" data-end="236.0"> What we are seeing here is a graph, </span></span><span class="sentence"><span data-start="237.0" data-end="239.0"> X-axis is time, Y-axis is power.</span></span></p><p><span class="sentence"><span data-start="239.0" data-end="241.0"> It's a waveform of an application usage.</span></span><span class="sentence"><span data-start="241.0" data-end="242.0"> What happened? </span></span><span class="sentence"><span data-start="242.0" data-end="244.0"> Let's say a user launches an app, a bunch of activities, </span></span><span class="sentence"><span data-start="245.0" data-end="247.0"> backgrounded the app, and the app got suspended.</span></span><span class="sentence"><span data-start="248.0" data-end="251.0"> The single most important point here is the entire area </span></span><span class="sentence"><span data-start="251.0" data-end="254.0"> under the graph is the energy consumption </span></span><span class="sentence"><span data-start="254.0" data-end="257.0"> of this particular app.</span></span><span class="sentence"><span data-start="258.0" data-end="260.0"> Energy is dictated by power and time, </span></span><span class="sentence"><span data-start="260.0" data-end="262.0"> and to illustrate the point further, </span></span><span class="sentence"><span data-start="262.0" data-end="266.0"> if we take two rectangles here, they are differing in terms </span></span><span class="sentence"><span data-start="266.0" data-end="268.0"> of how much power they consume, differing in terms </span></span><span class="sentence"><span data-start="268.0" data-end="271.0"> of how much time they consume, but they are equal energy wise.</span></span></p><p><span class="sentence"><span data-start="272.0" data-end="279.0"> Second concept, there's something called fixed cost, </span></span><span class="sentence"><span data-start="279.0" data-end="280.0"> there's something called dynamic cost.</span></span><span class="sentence"><span data-start="280.0" data-end="284.0"> A lot of hardware components we have in our systems, </span></span><span class="sentence"><span data-start="284.0" data-end="287.0"> if you have to use them, we have to first bring them into a state </span></span><span class="sentence"><span data-start="287.0" data-end="289.0"> where they can start serving your requests.</span></span><span class="sentence"><span data-start="290.0" data-end="293.0"> These states are very high energy consumption in terms </span></span><span class="sentence"><span data-start="294.0" data-end="295.0"> of -- compared to -- the sleep states.</span></span><span class="sentence"><span data-start="295.0" data-end="298.0"> Once they are brought up, they do the work that you asked it </span></span><span class="sentence"><span data-start="298.0" data-end="302.0"> to do, and then we keep them in that state in anticipation of, </span></span><span class="sentence"><span data-start="302.0" data-end="304.0"> you know, further work is going to come.</span></span><span class="sentence"><span data-start="304.0" data-end="306.0"> Once we see there's no work coming up, </span></span><span class="sentence"><span data-start="306.0" data-end="310.0"> we quiet them down, let them go to sleep.</span></span></p><p><span class="sentence"><span data-start="310.0" data-end="314.0"> Fixed cost can be very, very expensive, </span></span><span class="sentence"><span data-start="314.0" data-end="316.0"> and we will see throughout this talk how we will go </span></span><span class="sentence"><span data-start="316.0" data-end="319.0"> after this fixed cost whenever it starts impacting </span></span><span class="sentence"><span data-start="319.0" data-end="320.0"> your application.</span></span><span class="sentence"><span data-start="320.0" data-end="325.0"> When it comes down to reducing energy usage, </span></span><span class="sentence"><span data-start="325.0" data-end="328.0"> there are very simple three rules that you need to follow.</span></span></p><p><span class="sentence"><span data-start="328.0" data-end="330.0"> First rule, do it never.</span></span><span class="sentence"><span data-start="330.0" data-end="334.0"> Does a customer really need that work to be done? </span></span><span class="sentence"><span data-start="335.0" data-end="337.0"> If you don't do it, fixed cost, dynamic cost, energy, </span></span><span class="sentence"><span data-start="337.0" data-end="339.0"> power time -- all the things we have talked -- </span></span><span class="sentence"><span data-start="339.0" data-end="340.0"> is a grand total of zero.</span></span><span class="sentence"><span data-start="341.0" data-end="345.0"> Awesome. If you need to do it, do it less.</span></span></p><p><span class="sentence"><span data-start="345.0" data-end="348.0"> What is the least amount of work </span></span><span class="sentence"><span data-start="348.0" data-end="350.0"> to satisfy the customer's request? </span></span><span class="sentence"><span data-start="350.0" data-end="354.0"> Next thing, do it at a better time.</span></span></p><p><span class="sentence"><span data-start="354.0" data-end="357.0"> A customer is out in the wild, taking photographs.</span></span><span class="sentence"><span data-start="357.0" data-end="359.0"> Do I need to upload it to the server right now? </span></span><span class="sentence"><span data-start="359.0" data-end="361.0"> Have some tolerance, maybe </span></span><span class="sentence"><span data-start="361.0" data-end="363.0"> when a user is connected to a power outlet.</span></span><span class="sentence"><span data-start="363.0" data-end="367.0"> Third, do it efficiently.</span></span><span class="sentence"><span data-start="367.0" data-end="369.0"> What is the best efficient algorithm </span></span><span class="sentence"><span data-start="369.0" data-end="372.0"> or the best thing I can do to serve this request? </span></span><span class="sentence"><span data-start="372.0" data-end="375.0"> We will see how these things come back again and again </span></span><span class="sentence"><span data-start="375.0" data-end="380.0"> in different parts of the talk.</span></span></p><p><span class="sentence"><span data-start="380.0" data-end="384.0"> To jump in the energy debugging workflow and tools we have, </span></span><span class="sentence"><span data-start="384.0" data-end="387.0"> let's look at how does an energy debugging workflow look like? </span></span><span class="sentence"><span data-start="388.0" data-end="390.0"> It's very similar to normal software engineering practices.</span></span></p><p><span class="sentence"><span data-start="390.0" data-end="393.0"> What you do: you write code and build.</span></span><span class="sentence"><span data-start="394.0" data-end="396.0"> You run it on a very simple debugger which tries </span></span><span class="sentence"><span data-start="396.0" data-end="398.0"> to show you what's the high-level problems </span></span><span class="sentence"><span data-start="398.0" data-end="399.0"> in your code.</span></span><span class="sentence"><span data-start="399.0" data-end="402.0"> A lot of problems you can easily identify, </span></span><span class="sentence"><span data-start="402.0" data-end="403.0"> fix, and you run it again.</span></span></p><p><span class="sentence"><span data-start="404.0" data-end="407.0"> Some of the problems, though, are hard, so you go ahead </span></span><span class="sentence"><span data-start="407.0" data-end="410.0"> and say let me get a focused debugger, you know? </span></span><span class="sentence"><span data-start="411.0" data-end="412.0"> Hey, I have a memory issue.</span></span></p><p><span class="sentence"><span data-start="412.0" data-end="415.0"> Let me get a focused tool only on memory that can pinpoint </span></span><span class="sentence"><span data-start="415.0" data-end="418.0"> in my app exact line of the code, where is the problem? </span></span><span class="sentence"><span data-start="419.0" data-end="421.0"> And once you are done with all this, </span></span><span class="sentence"><span data-start="421.0" data-end="424.0"> you ship it to your customers and your customers use it.</span></span><span class="sentence"><span data-start="424.0" data-end="428.0"> On OS X side, we have Xcode, where we write </span></span><span class="sentence"><span data-start="428.0" data-end="430.0"> and build your application.</span></span></p><p><span class="sentence"><span data-start="431.0" data-end="434.0"> As part of general debugger, within Xcode, </span></span><span class="sentence"><span data-start="434.0" data-end="436.0"> there are energy debugging tools, </span></span><span class="sentence"><span data-start="436.0" data-end="437.0"> which we are going to talk about.</span></span></p><p><span class="sentence"><span data-start="438.0" data-end="441.0"> These show primarily hints of how your app is behaving.</span></span><span class="sentence"><span data-start="442.0" data-end="446.0"> As part of instruments, we have focus tools.</span></span><span class="sentence"><span data-start="446.0" data-end="448.0"> Once you have identified, hey, </span></span><span class="sentence"><span data-start="448.0" data-end="449.0"> this part of the system is a problem, </span></span><span class="sentence"><span data-start="449.0" data-end="451.0"> let me go ahead and fix this.</span></span><span class="sentence"><span data-start="451.0" data-end="454.0"> And customers, as we talked about, they have energy impact, </span></span><span class="sentence"><span data-start="454.0" data-end="457.0"> and they can go ahead and look at it.</span></span><span class="sentence"><span data-start="457.0" data-end="459.0"> Before we jump into the tools, </span></span><span class="sentence"><span data-start="459.0" data-end="462.0"> let's look at energy debugging priorities on OS X.</span></span></p><p><span class="sentence"><span data-start="462.0" data-end="465.0"> The reason is the tools are very focused </span></span><span class="sentence"><span data-start="465.0" data-end="467.0"> on energy debugging priority because they point you </span></span><span class="sentence"><span data-start="467.0" data-end="472.0"> to exactly the location where you need to fix your problem.</span></span></p><p><span class="sentence"><span data-start="472.0" data-end="478.0"> Priorities on OS X are the CPU and GPU.</span></span><span class="sentence"><span data-start="479.0" data-end="482.0"> They have a very, very high fixed cost.</span></span><span class="sentence"><span data-start="483.0" data-end="485.0"> To bring it to a state where they can serve you </span></span><span class="sentence"><span data-start="485.0" data-end="488.0"> or your request in the idle state, </span></span><span class="sentence"><span data-start="488.0" data-end="492.0"> it is ten times the power consumption of as compared </span></span><span class="sentence"><span data-start="492.0" data-end="493.0"> to when they are in the sleep state.</span></span></p><p><span class="sentence"><span data-start="494.0" data-end="497.0"> Once they are in the idle state, if you use CPU for 1 percent, </span></span><span class="sentence"><span data-start="497.0" data-end="500.0"> that is 10 percent more on top of idle power consumption.</span></span><span class="sentence"><span data-start="501.0" data-end="503.0"> And from then on, it goes exponential.</span></span></p><p><span class="sentence"><span data-start="503.0" data-end="507.0"> 10 percent CPU, two times idle; 100 percent CPU, 100 times idle.</span></span><span class="sentence"><span data-start="508.0" data-end="510.0"> Very simple rule here.</span></span><span class="sentence"><span data-start="510.0" data-end="513.0"> Do not wake the CPU up if you do not need to.</span></span></p><p><span class="sentence"><span data-start="513.0" data-end="514.0"> Let the giant bear sleep.</span></span><span class="sentence"><span data-start="514.0" data-end="516.0"> Don't poke it.</span></span><span class="sentence"><span data-start="517.0" data-end="520.0"> The tool we have in Xcode, I call it energy gauges, </span></span><span class="sentence"><span data-start="521.0" data-end="524.0"> it prints you an energy report that looks something like this.</span></span><span class="sentence"><span data-start="524.0" data-end="525.0"> How do you get there? </span></span><span class="sentence"><span data-start="526.0" data-end="528.0"> You click -- once you are running your application, </span></span><span class="sentence"><span data-start="528.0" data-end="530.0"> click on the debug analysis part.</span></span><span class="sentence"><span data-start="530.0" data-end="532.0"> Once you click there, you see a bunch of gauges.</span></span><span class="sentence"><span data-start="532.0" data-end="534.0"> Click on the energy impact gauge.</span></span></p><p><span class="sentence"><span data-start="534.0" data-end="535.0"> You will see the report.</span></span><span class="sentence"><span data-start="536.0" data-end="540.0"> What do you see in the report? </span></span><span class="sentence"><span data-start="540.0" data-end="546.0"> So primarily, you'll see if you are being a bad citizen of OS X, </span></span><span class="sentence"><span data-start="547.0" data-end="551.0"> basically, you have -- if you are using high CPU.</span></span><span class="sentence"><span data-start="551.0" data-end="553.0"> If you are preventing your -- </span></span><span class="sentence"><span data-start="554.0" data-end="557.0"> your application is in background, user is not looking </span></span><span class="sentence"><span data-start="557.0" data-end="561.0"> at it, system will try to put you in App Nap, which is a kind </span></span><span class="sentence"><span data-start="561.0" data-end="563.0"> of background suspend, and you are preventing system </span></span><span class="sentence"><span data-start="563.0" data-end="564.0"> to do that.</span></span></p><p><span class="sentence"><span data-start="564.0" data-end="566.0"> You are not actively serving any request, </span></span><span class="sentence"><span data-start="566.0" data-end="567.0"> but you are burning a lot of energy.</span></span><span class="sentence"><span data-start="568.0" data-end="569.0"> Idle prevention.</span></span></p><p><span class="sentence"><span data-start="569.0" data-end="571.0"> You are not letting the CPU to go to into idle state.</span></span><span class="sentence"><span data-start="571.0" data-end="575.0"> If it cannot go into idle, it cannot go into sleep state.</span></span><span class="sentence"><span data-start="575.0" data-end="579.0"> Once gone into sleep state, the CPU wake overhead says hey, </span></span><span class="sentence"><span data-start="579.0" data-end="582.0"> you are responsible to bring this guy up.</span></span><span class="sentence"><span data-start="583.0" data-end="585.0"> Once you have figured out high level </span></span><span class="sentence"><span data-start="585.0" data-end="586.0"> where the problem comes in, </span></span><span class="sentence"><span data-start="587.0" data-end="590.0"> what you can do is just underneath the report, </span></span><span class="sentence"><span data-start="590.0" data-end="591.0"> you have first of all the description </span></span><span class="sentence"><span data-start="591.0" data-end="593.0"> of the things we just talked about, </span></span><span class="sentence"><span data-start="593.0" data-end="596.0"> but you have these buttons which you can jump into instruments, </span></span><span class="sentence"><span data-start="597.0" data-end="599.0"> and these tools are specifically designed for each </span></span><span class="sentence"><span data-start="599.0" data-end="603.0"> and every area, and they can, you know, help you pinpoint, </span></span><span class="sentence"><span data-start="603.0" data-end="605.0"> hey, which line of code is actually causing high </span></span><span class="sentence"><span data-start="605.0" data-end="607.0"> CPU utilization? </span></span><span class="sentence"><span data-start="607.0" data-end="609.0"> Which line of code is causing the wake overhead? </span></span><span class="sentence"><span data-start="610.0" data-end="614.0"> You can go ahead and debug your app.</span></span><span class="sentence"><span data-start="615.0" data-end="617.0"> When it comes to principles of reducing energy on OS X, </span></span><span class="sentence"><span data-start="618.0" data-end="621.0"> we come back to our three simple rules: do it never/do it less.</span></span></p><p><span class="sentence"><span data-start="621.0" data-end="623.0"> You want to coalesce all the timers.</span></span><span class="sentence"><span data-start="623.0" data-end="625.0"> You don't want to wake up the system again and again.</span></span><span class="sentence"><span data-start="626.0" data-end="627.0"> Minimize CPU wakes.</span></span></p><p><span class="sentence"><span data-start="628.0" data-end="629.0"> Do it at a better time.</span></span><span class="sentence"><span data-start="629.0" data-end="632.0"> Use the background activity scheduler APIs, </span></span><span class="sentence"><span data-start="632.0" data-end="635.0"> where you can specify a lot of parameters </span></span><span class="sentence"><span data-start="635.0" data-end="637.0"> and let the system choose the right time for you.</span></span><span class="sentence"><span data-start="638.0" data-end="641.0"> Do it efficiently, set the right work priorities, </span></span><span class="sentence"><span data-start="641.0" data-end="643.0"> QoS work priorities, on your work queues.</span></span></p><p><span class="sentence"><span data-start="644.0" data-end="645.0"> Program a computer algorithm.</span></span><span class="sentence"><span data-start="645.0" data-end="655.0"> Moving on to iOS, CPU is still a dominant energy consumption.</span></span><span class="sentence"><span data-start="656.0" data-end="659.0"> But given the fact that these devices are different </span></span><span class="sentence"><span data-start="659.0" data-end="665.0"> than OS X devices, a few other things come into play.</span></span><span class="sentence"><span data-start="666.0" data-end="669.0"> First of all, two of the peripheries, location </span></span><span class="sentence"><span data-start="669.0" data-end="672.0"> and networking, can be equally costly as CPU </span></span><span class="sentence"><span data-start="672.0" data-end="674.0"> if not more in some use cases.</span></span><span class="sentence"><span data-start="675.0" data-end="679.0"> Next, when an app runs in the background, </span></span><span class="sentence"><span data-start="679.0" data-end="683.0"> your app consumes all these three hardware </span></span><span class="sentence"><span data-start="683.0" data-end="685.0"> and it consumes a lot of energy.</span></span><span class="sentence"><span data-start="685.0" data-end="688.0"> You don't have the display energy, but still all the rest </span></span><span class="sentence"><span data-start="688.0" data-end="691.0"> of components are huge in terms of energy consumption.</span></span></p><p><span class="sentence"><span data-start="691.0" data-end="695.0"> So let's look at each of these one by one.</span></span><span class="sentence"><span data-start="695.0" data-end="698.0"> Location energy usually acts like this.</span></span><span class="sentence"><span data-start="698.0" data-end="700.0"> It's not very high in power.</span></span></p><p><span class="sentence"><span data-start="700.0" data-end="702.0"> The power is data mined by which API you have called </span></span><span class="sentence"><span data-start="702.0" data-end="705.0"> and what is the precision with which you are calling it.</span></span><span class="sentence"><span data-start="706.0" data-end="707.0"> The time component is big, </span></span><span class="sentence"><span data-start="707.0" data-end="709.0"> and that is how the energy becomes really huge.</span></span><span class="sentence"><span data-start="710.0" data-end="714.0"> When it comes to fixing location issues, again, same principles: </span></span><span class="sentence"><span data-start="714.0" data-end="717.0"> do it never, do continuous location only </span></span><span class="sentence"><span data-start="717.0" data-end="719.0"> if you actually need it, </span></span><span class="sentence"><span data-start="719.0" data-end="721.0"> it has actually been requested by the user.</span></span><span class="sentence"><span data-start="721.0" data-end="723.0"> And please stop once you are done with it.</span></span></p><p><span class="sentence"><span data-start="723.0" data-end="724.0"> Once you get the location, </span></span><span class="sentence"><span data-start="724.0" data-end="728.0"> once your request is satisfied, just stop it.</span></span><span class="sentence"><span data-start="728.0" data-end="730.0"> Next, do it efficiently.</span></span></p><p><span class="sentence"><span data-start="730.0" data-end="732.0"> What is the best accuracy you need? </span></span><span class="sentence"><span data-start="732.0" data-end="734.0"> Do you need to know exactly within three feet </span></span><span class="sentence"><span data-start="734.0" data-end="737.0"> where the user is standing on earth or the city is good enough </span></span><span class="sentence"><span data-start="737.0" data-end="739.0"> in predicting weather for it? </span></span><span class="sentence"><span data-start="740.0" data-end="741.0"> What are you trying to do? </span></span><span class="sentence"><span data-start="741.0" data-end="744.0"> We have went ahead in the location site and we said hey, </span></span><span class="sentence"><span data-start="745.0" data-end="748.0"> there are a set of use cases where people want to have </span></span><span class="sentence"><span data-start="749.0" data-end="751.0"> and for each of the use cases, we have designed APIs </span></span><span class="sentence"><span data-start="751.0" data-end="755.0"> that help serve better the developers, you.</span></span></p><p><span class="sentence"><span data-start="756.0" data-end="760.0"> Try to read on these APIs what actually you want </span></span><span class="sentence"><span data-start="760.0" data-end="767.0"> and we'll do the energy management really nice for you.</span></span><span class="sentence"><span data-start="767.0" data-end="769.0"> When it comes to networking, </span></span><span class="sentence"><span data-start="769.0" data-end="771.0"> very similar principles: do it never.</span></span><span class="sentence"><span data-start="771.0" data-end="772.0"> Cut down transfers.</span></span><span class="sentence"><span data-start="773.0" data-end="775.0"> Can you cache, can you compress? </span></span><span class="sentence"><span data-start="775.0" data-end="777.0"> Do you need the highest quality media </span></span><span class="sentence"><span data-start="777.0" data-end="778.0"> on the smallest form factor? </span></span><span class="sentence"><span data-start="781.0" data-end="782.0"> Can you do it at a better time? </span></span><span class="sentence"><span data-start="782.0" data-end="783.0"> Can you consider tolerance? </span></span><span class="sentence"><span data-start="784.0" data-end="785.0"> When is it needed? </span></span><span class="sentence"><span data-start="785.0" data-end="787.0"> Can you mark it as a discretionary? </span></span><span class="sentence"><span data-start="788.0" data-end="789.0"> The moment you mark it discretionary, </span></span><span class="sentence"><span data-start="789.0" data-end="790.0"> the system takes over.</span></span><span class="sentence"><span data-start="790.0" data-end="793.0"> You can specify, hey, in the next 6 hours </span></span><span class="sentence"><span data-start="793.0" data-end="795.0"> or the next 12 hours, I need this to be uploaded </span></span><span class="sentence"><span data-start="795.0" data-end="797.0"> or downloaded, and the system will figure </span></span><span class="sentence"><span data-start="797.0" data-end="800.0"> out what's the best time, will do the activity for you, </span></span><span class="sentence"><span data-start="800.0" data-end="804.0"> and once it's done, it will tell you hey, this activity is done.</span></span><span class="sentence"><span data-start="805.0" data-end="806.0"> Do it more efficiently.</span></span><span class="sentence"><span data-start="807.0" data-end="808.0"> Coalesce transfers.</span></span></p><p><span class="sentence"><span data-start="809.0" data-end="810.0"> Let's take a look at an example.</span></span><span class="sentence"><span data-start="810.0" data-end="811.0"> What do we mean by this? </span></span><span class="sentence"><span data-start="812.0" data-end="815.0"> Let's say you have a requirement where you have to sync data </span></span><span class="sentence"><span data-start="815.0" data-end="817.0"> to a server, user is using your app and have </span></span><span class="sentence"><span data-start="817.0" data-end="820.0"> to periodically sync as it's being generated on the device.</span></span><span class="sentence"><span data-start="821.0" data-end="822.0"> Very simple solution.</span></span></p><p><span class="sentence"><span data-start="823.0" data-end="825.0"> As the data is getting generated </span></span><span class="sentence"><span data-start="825.0" data-end="827.0"> on the device, just keep pushing it.</span></span><span class="sentence"><span data-start="828.0" data-end="829.0"> What happens here? </span></span><span class="sentence"><span data-start="830.0" data-end="833.0"> For every push, you bring the data up, you send your 2 bytes, </span></span><span class="sentence"><span data-start="833.0" data-end="835.0"> 10 bytes, 100 bytes, radio stays </span></span><span class="sentence"><span data-start="835.0" data-end="837.0"> on for a long time, it goes to sleep.</span></span></p><p><span class="sentence"><span data-start="838.0" data-end="839.0"> Next push, the same is repeated.</span></span><span class="sentence"><span data-start="841.0" data-end="844.0"> The fixed cost is very high in that point.</span></span><span class="sentence"><span data-start="845.0" data-end="845.0"> How do you fix it? </span></span><span class="sentence"><span data-start="846.0" data-end="847.0"> Very simple.</span></span><span class="sentence"><span data-start="847.0" data-end="848.0"> Coalesce all the transfers.</span></span><span class="sentence"><span data-start="849.0" data-end="851.0"> Let the user interact with the device, build a state, </span></span><span class="sentence"><span data-start="852.0" data-end="854.0"> and once in a while send the state to the cloud </span></span><span class="sentence"><span data-start="855.0" data-end="858.0"> so that you pay the cost only once, the cost of fixed price.</span></span><span class="sentence"><span data-start="859.0" data-end="865.0"> Moving to background, first thing, </span></span><span class="sentence"><span data-start="865.0" data-end="869.0"> background when your app is running at the background, </span></span><span class="sentence"><span data-start="869.0" data-end="871.0"> it is draining energy from the user.</span></span><span class="sentence"><span data-start="872.0" data-end="874.0"> Please don't do anything in background </span></span><span class="sentence"><span data-start="874.0" data-end="875.0"> if you don't need to do it.</span></span><span class="sentence"><span data-start="877.0" data-end="880.0"> If you need to do it, call your task completion handler as quick </span></span><span class="sentence"><span data-start="880.0" data-end="886.0"> as possible, and this task completion handler is an </span></span><span class="sentence"><span data-start="886.0" data-end="888.0"> indication to the system saying, hey, I am done.</span></span><span class="sentence"><span data-start="888.0" data-end="889.0"> Please suspend me.</span></span><span class="sentence"><span data-start="889.0" data-end="891.0"> Please let the device go to sleep.</span></span></p><p><span class="sentence"><span data-start="892.0" data-end="893.0"> Do it efficiently.</span></span><span class="sentence"><span data-start="893.0" data-end="896.0"> There are a lot of background APIs that you can, you know, </span></span><span class="sentence"><span data-start="896.0" data-end="899.0"> give your system a hand, you know, please do the work for me </span></span><span class="sentence"><span data-start="899.0" data-end="902.0"> as you find the best time and the best, you know, </span></span><span class="sentence"><span data-start="902.0" data-end="905.0"> period energy wise and the system will do it for you.</span></span><span class="sentence"><span data-start="906.0" data-end="911.0"> To go back to the energy debugging workflow on iOS, </span></span><span class="sentence"><span data-start="911.0" data-end="913.0"> what we have so far, we have Xcode, </span></span><span class="sentence"><span data-start="913.0" data-end="914.0"> where you write and build your code.</span></span><span class="sentence"><span data-start="916.0" data-end="917.0"> Customers have battery usage UI </span></span><span class="sentence"><span data-start="917.0" data-end="920.0"> where they can see how your app is performing energy wise.</span></span><span class="sentence"><span data-start="921.0" data-end="927.0"> So far, we have had for a few years a tool called Energy </span></span><span class="sentence"><span data-start="927.0" data-end="930.0"> Diagnostics in Instruments that can give you a first-cut idea </span></span><span class="sentence"><span data-start="930.0" data-end="932.0"> of how your app is behaving.</span></span><span class="sentence"><span data-start="932.0" data-end="934.0"> Let's take a look at this tool.</span></span><span class="sentence"><span data-start="935.0" data-end="936.0"> How do you enable it? </span></span><span class="sentence"><span data-start="936.0" data-end="939.0"> You go to settings, developer, go to the logging pane.</span></span><span class="sentence"><span data-start="940.0" data-end="943.0"> You turn on the energy toggle here </span></span><span class="sentence"><span data-start="943.0" data-end="945.0"> and then you say, hey, start recording.</span></span></p><p><span class="sentence"><span data-start="945.0" data-end="949.0"> Once you have started recording, use your app </span></span><span class="sentence"><span data-start="949.0" data-end="951.0"> as your customer will.</span></span><span class="sentence"><span data-start="951.0" data-end="954.0"> Live on it for a few hours, 12 hours, </span></span><span class="sentence"><span data-start="954.0" data-end="956.0"> 24 hours, a few days or so.</span></span><span class="sentence"><span data-start="956.0" data-end="957.0"> And once you are done, </span></span><span class="sentence"><span data-start="957.0" data-end="959.0"> just click the button, stop recording.</span></span></p><p><span class="sentence"><span data-start="963.0" data-end="966.0"> After this, connect your device to a Mac and go </span></span><span class="sentence"><span data-start="966.0" data-end="968.0"> to the instrument, select Energy Diagnostics, and say hey, </span></span><span class="sentence"><span data-start="969.0" data-end="970.0"> please import the log data that you have.</span></span></p><p><span class="sentence"><span data-start="971.0" data-end="973.0"> Once you do that, you will get a picture, </span></span><span class="sentence"><span data-start="973.0" data-end="977.0"> which is something like this.</span></span><span class="sentence"><span data-start="987.0" data-end="989.0"> You'll see Wi-Fi, Bluetooth, </span></span><span class="sentence"><span data-start="989.0" data-end="991.0"> and you'll see how long they were on, when they were on, </span></span><span class="sentence"><span data-start="991.0" data-end="993.0"> when they were off, and so on.</span></span><span class="sentence"><span data-start="993.0" data-end="996.0"> You will see how many packets were sent out of each interface, </span></span><span class="sentence"><span data-start="996.0" data-end="997.0"> what was the CPU activity.</span></span><span class="sentence"><span data-start="998.0" data-end="1000.0"> At the top, you will see an energy usage level, </span></span><span class="sentence"><span data-start="1000.0" data-end="1002.0"> which with is a number out of 20.</span></span></p><p><span class="sentence"><span data-start="1002.0" data-end="1004.0"> If you are 20 out of 20, believe me, it's a problem.</span></span><span class="sentence"><span data-start="1005.0" data-end="1007.0"> Very, very high energy consumption.</span></span><span class="sentence"><span data-start="1007.0" data-end="1010.0"> You want to stay close to 1.</span></span></p><p><span class="sentence"><span data-start="1011.0" data-end="1014.0"> This tool is good if you want to do long experiments.</span></span><span class="sentence"><span data-start="1014.0" data-end="1018.0"> But what it doesn't do is it doesn't tell you why did the </span></span><span class="sentence"><span data-start="1018.0" data-end="1018.0"> hardware come up? </span></span><span class="sentence"><span data-start="1019.0" data-end="1020.0"> Did you request it? </span></span><span class="sentence"><span data-start="1020.0" data-end="1021.0"> Where did you request it? </span></span><span class="sentence"><span data-start="1022.0" data-end="1026.0"> It doesn't pinpoint, it's not fine-grain to go to your code.</span></span></p><p><span class="sentence"><span data-start="1027.0" data-end="1033.0"> To fix this problem, this year we are introducing energy gauges </span></span><span class="sentence"><span data-start="1033.0" data-end="1038.0"> on iOS and instruments, a few instruments too, </span></span><span class="sentence"><span data-start="1038.0" data-end="1040.0"> which you can use to pinpoint in your code </span></span><span class="sentence"><span data-start="1040.0" data-end="1042.0"> where the problem is coming from.</span></span><span class="sentence"><span data-start="1043.0" data-end="1047.0"> To talk about all of these, let's move to demo.</span></span><span class="sentence"><span data-start="1047.0" data-end="1052.0"> I call Pai-Han Huang, my colleague, to talk all about it.</span></span></p><p><span class="sentence"><span data-start="1053.0" data-end="1056.0"> </span></span><span class="sentence"><span data-start="1057.0" data-end="1058.0">  PAI-HAN HUANG: So, in a demo, I will walk you </span></span><span class="sentence"><span data-start="1058.0" data-end="1062.0"> through the major features of the new energy bugging tools, </span></span><span class="sentence"><span data-start="1063.0" data-end="1066.0"> demo the app, and show you how we can use the new tools </span></span><span class="sentence"><span data-start="1066.0" data-end="1070.0"> to identify and improve the energy efficiency of your app.</span></span><span class="sentence"><span data-start="1070.0" data-end="1075.0"> So as a developer, I like these new tools because they are easy, </span></span><span class="sentence"><span data-start="1075.0" data-end="1078.0"> they are effective, so at the end of the demo, </span></span><span class="sentence"><span data-start="1078.0" data-end="1081.0"> I hope you will join me in including these new tools </span></span><span class="sentence"><span data-start="1081.0" data-end="1083.0"> as part of your project cycle.</span></span></p><p><span class="sentence"><span data-start="1084.0" data-end="1086.0"> There are two major components in the demo.</span></span><span class="sentence"><span data-start="1087.0" data-end="1091.0"> One is the new tool set; the other one is the demo app.</span></span><span class="sentence"><span data-start="1092.0" data-end="1095.0"> So let me start from introducing you to the new tool set.</span></span></p><p><span class="sentence"><span data-start="1101.0" data-end="1103.0"> On the screen, what we are seeing is the screenshot </span></span><span class="sentence"><span data-start="1104.0" data-end="1107.0"> of iOS energy gauge, which is the entry point </span></span><span class="sentence"><span data-start="1107.0" data-end="1110.0"> to all the other new energy debugging tools </span></span><span class="sentence"><span data-start="1110.0" data-end="1110.0"> for iOS this year.</span></span><span class="sentence"><span data-start="1113.0" data-end="1114.0"> So where is it? </span></span><span class="sentence"><span data-start="1115.0" data-end="1119.0"> It is actually inside debug navigator of Xcode, </span></span><span class="sentence"><span data-start="1119.0" data-end="1121.0"> which you can find over here.</span></span><span class="sentence"><span data-start="1122.0" data-end="1124.0"> After you launch your apps through Xcode, </span></span><span class="sentence"><span data-start="1125.0" data-end="1129.0"> you will be populated automatically for you over here.</span></span></p><p><span class="sentence"><span data-start="1130.0" data-end="1132.0"> And when you click it, it will bring you </span></span><span class="sentence"><span data-start="1132.0" data-end="1133.0"> to the right-hand side of the screen.</span></span><span class="sentence"><span data-start="1134.0" data-end="1138.0"> And the iOS energy gauge can visualize the energy impact </span></span><span class="sentence"><span data-start="1138.0" data-end="1141.0"> of your code, can visualize the energy impact of your code, </span></span><span class="sentence"><span data-start="1142.0" data-end="1145.0"> both instantaneously and in the average instance.</span></span><span class="sentence"><span data-start="1146.0" data-end="1149.0"> So the first is the instantaneous energy impact </span></span><span class="sentence"><span data-start="1149.0" data-end="1151.0"> of your code, can be found </span></span><span class="sentence"><span data-start="1151.0" data-end="1153.0"> in the field meter, which is over here.</span></span><span class="sentence"><span data-start="1155.0" data-end="1161.0"> There are three different zones in this graph.</span></span></p><p><span class="sentence"><span data-start="1161.0" data-end="1164.0"> In the speedometer, the lowest one, when the needle points </span></span><span class="sentence"><span data-start="1164.0" data-end="1166.0"> to a green zone, it means the energy impact </span></span><span class="sentence"><span data-start="1166.0" data-end="1168.0"> of your code is actually reasonable.</span></span></p><p><span class="sentence"><span data-start="1168.0" data-end="1169.0"> Congratulations.</span></span><span class="sentence"><span data-start="1169.0" data-end="1172.0"> You are a good citizen of the iOS ecosystem.</span></span><span class="sentence"><span data-start="1173.0" data-end="1176.0"> But still, we suggest you to take a look at these new tools </span></span><span class="sentence"><span data-start="1176.0" data-end="1179.0"> to see how you can make your customers happier.</span></span><span class="sentence"><span data-start="1180.0" data-end="1183.0"> When the needle moves up, it enters the yellow zone.</span></span><span class="sentence"><span data-start="1184.0" data-end="1187.0"> In the yellow zone, the energy impact of your code is high, </span></span><span class="sentence"><span data-start="1188.0" data-end="1191.0"> so it's likely that if you don't deal with it carefully, </span></span><span class="sentence"><span data-start="1191.0" data-end="1195.0"> your app will show up high in the battery usage UI.</span></span><span class="sentence"><span data-start="1196.0" data-end="1198.0"> So please use the new energy debugging tools </span></span><span class="sentence"><span data-start="1199.0" data-end="1202.0"> to see how you can improve the energy efficiency of your code.</span></span><span class="sentence"><span data-start="1203.0" data-end="1207.0"> But if the needle keeps moving up, you enter the red zone.</span></span><span class="sentence"><span data-start="1208.0" data-end="1211.0"> Red zone indicates that the energy impact </span></span><span class="sentence"><span data-start="1211.0" data-end="1213.0"> of your code is very high.</span></span><span class="sentence"><span data-start="1213.0" data-end="1217.0"> It means that even with the slight usage of your app, </span></span><span class="sentence"><span data-start="1217.0" data-end="1219.0"> users will significantly -- </span></span><span class="sentence"><span data-start="1219.0" data-end="1222.0"> will experience significant battery drop on your device.</span></span><span class="sentence"><span data-start="1222.0" data-end="1225.0"> So please use the new tools! </span></span><span class="sentence"><span data-start="1225.0" data-end="1225.0"> Please [laughter]! </span></span><span class="sentence"><span data-start="1228.0" data-end="1229.0"> Sorry, I apologize.</span></span><span class="sentence"><span data-start="1229.0" data-end="1232.0"> That's the evil in me protesting to the people </span></span><span class="sentence"><span data-start="1232.0" data-end="1234.0"> who don't take battery life seriously.</span></span></p><p><span class="sentence"><span data-start="1235.0" data-end="1238.0"> I promise you, I am a very nice guy, so come to chat with me, </span></span><span class="sentence"><span data-start="1238.0" data-end="1240.0"> you know, in the last session this afternoon.</span></span><span class="sentence"><span data-start="1241.0" data-end="1244.0"> Okay? Okay.</span></span></p><p><span class="sentence"><span data-start="1245.0" data-end="1250.0"> But speedometer can give you an instantaneous energy impact </span></span><span class="sentence"><span data-start="1250.0" data-end="1252.0"> information overall of your app.</span></span><span class="sentence"><span data-start="1253.0" data-end="1259.0"> If you want to see more breakdown, you should see here, </span></span><span class="sentence"><span data-start="1260.0" data-end="1261.0"> energy impact session.</span></span><span class="sentence"><span data-start="1262.0" data-end="1265.0"> So this graph will be refreshed once every second.</span></span><span class="sentence"><span data-start="1266.0" data-end="1271.0"> If your app introduces any workload to CPU, location, </span></span><span class="sentence"><span data-start="1272.0" data-end="1275.0"> or networking, you will see a block showing </span></span><span class="sentence"><span data-start="1275.0" data-end="1279.0"> up on the top three rows in the corresponding time slots.</span></span><span class="sentence"><span data-start="1280.0" data-end="1282.0"> And, as an earlier talk it was mentioned, </span></span><span class="sentence"><span data-start="1283.0" data-end="1285.0"> your app can consume significant power, </span></span><span class="sentence"><span data-start="1285.0" data-end="1288.0"> not just on the foreground, but on the background as well.</span></span><span class="sentence"><span data-start="1288.0" data-end="1290.0"> So based on this observation, </span></span><span class="sentence"><span data-start="1290.0" data-end="1292.0"> we have the fourth rule, background.</span></span><span class="sentence"><span data-start="1293.0" data-end="1296.0"> When your app stays in the background and doesn't go away, </span></span><span class="sentence"><span data-start="1297.0" data-end="1300.0"> you will see the moving blocks showing up on the fourth row.</span></span></p><p><span class="sentence"><span data-start="1301.0" data-end="1305.0"> On top of the graph, you will see a series of color bars.</span></span><span class="sentence"><span data-start="1305.0" data-end="1307.0"> And they look like this.</span></span><span class="sentence"><span data-start="1309.0" data-end="1309.0"> Two colors.</span></span></p><p><span class="sentence"><span data-start="1310.0" data-end="1316.0"> Red color means that that is overhead, energy used to bring </span></span><span class="sentence"><span data-start="1316.0" data-end="1319.0"> up the system resources like the radio module to perform work </span></span><span class="sentence"><span data-start="1320.0" data-end="1323.0"> for your app, and it also maps to an earlier talk, </span></span><span class="sentence"><span data-start="1323.0" data-end="1325.0"> the fixed cost of the hardware.</span></span><span class="sentence"><span data-start="1325.0" data-end="1331.0"> For the blue one, it represents the energy which has been used </span></span><span class="sentence"><span data-start="1331.0" data-end="1335.0"> to service the workload introduced by your app.</span></span></p><p><span class="sentence"><span data-start="1336.0" data-end="1338.0"> Besides instantaneous information, </span></span><span class="sentence"><span data-start="1338.0" data-end="1339.0"> we also provide average information.</span></span><span class="sentence"><span data-start="1340.0" data-end="1344.0"> For example, like this one, the average overhead in percentile, </span></span><span class="sentence"><span data-start="1345.0" data-end="1350.0"> and this guy shows you the average energy impact.</span></span><span class="sentence"><span data-start="1350.0" data-end="1356.0"> On the bottom, you will see a series of explanations </span></span><span class="sentence"><span data-start="1356.0" data-end="1359.0"> about legend, CPU, location, networking, and background.</span></span></p><p><span class="sentence"><span data-start="1360.0" data-end="1363.0"> And it also provides some tips about how you can optimize them.</span></span><span class="sentence"><span data-start="1364.0" data-end="1368.0"> But please remember that iOS energy gauge is designed </span></span><span class="sentence"><span data-start="1369.0" data-end="1371.0"> to show you quick the high-level understanding </span></span><span class="sentence"><span data-start="1371.0" data-end="1374.0"> about your energy impact of your code.</span></span><span class="sentence"><span data-start="1374.0" data-end="1377.0"> So if you want more detailed information, more breakdown, </span></span><span class="sentence"><span data-start="1378.0" data-end="1379.0"> then check this button.</span></span></p><p><span class="sentence"><span data-start="1381.0" data-end="1383.0"> This button, after you click it, it will trampoline you </span></span><span class="sentence"><span data-start="1383.0" data-end="1385.0"> to the corresponding instrument, </span></span><span class="sentence"><span data-start="1385.0" data-end="1391.0"> to give you breakdown energy information for your app.</span></span></p><p><span class="sentence"><span data-start="1391.0" data-end="1392.0"> This is the iOS energy gauge.</span></span><span class="sentence"><span data-start="1393.0" data-end="1397.0"> Let me next briefly introduce you to instruments.</span></span><span class="sentence"><span data-start="1398.0" data-end="1400.0"> Instruments, as many of you already use them: </span></span><span class="sentence"><span data-start="1400.0" data-end="1401.0"> it looks very similar.</span></span><span class="sentence"><span data-start="1402.0" data-end="1404.0"> For example, the one you see </span></span><span class="sentence"><span data-start="1404.0" data-end="1407.0"> on the screen is the location instrument.</span></span></p><p><span class="sentence"><span data-start="1407.0" data-end="1410.0"> How do we start? </span></span><span class="sentence"><span data-start="1410.0" data-end="1416.0"> We start from toggle this button, record it, and stop it.</span></span><span class="sentence"><span data-start="1416.0" data-end="1421.0"> After you record it, you will see the system activity </span></span><span class="sentence"><span data-start="1421.0" data-end="1423.0"> like this.</span></span><span class="sentence"><span data-start="1423.0" data-end="1426.0"> And you will see some reasons </span></span><span class="sentence"><span data-start="1426.0" data-end="1428.0"> about why you see this kind of activity.</span></span></p><p><span class="sentence"><span data-start="1428.0" data-end="1431.0"> For example, here you will see the location service </span></span><span class="sentence"><span data-start="1431.0" data-end="1433.0"> that is trying to request for location.</span></span><span class="sentence"><span data-start="1434.0" data-end="1437.0"> And if you want more information, more detail, </span></span><span class="sentence"><span data-start="1438.0" data-end="1440.0"> go here, extended detail.</span></span><span class="sentence"><span data-start="1440.0" data-end="1445.0"> Then you will bring up this guy, which is the code stack.</span></span><span class="sentence"><span data-start="1446.0" data-end="1450.0"> So this is the introduction to the instruments.</span></span></p><p><span class="sentence"><span data-start="1450.0" data-end="1454.0"> Next, let me briefly talk about the demo app.</span></span><span class="sentence"><span data-start="1455.0" data-end="1458.0"> On the screen, you will see a screenshot of our demo app, </span></span><span class="sentence"><span data-start="1459.0" data-end="1460.0"> which we call Energy Buddy.</span></span></p><p><span class="sentence"><span data-start="1461.0" data-end="1463.0"> So, as an iOS power software engineer, </span></span><span class="sentence"><span data-start="1463.0" data-end="1467.0"> I am eager to know whether I can improve my energy efficiency </span></span><span class="sentence"><span data-start="1467.0" data-end="1469.0"> everywhere, not just on my phone, </span></span><span class="sentence"><span data-start="1469.0" data-end="1471.0"> but in my daily life as well.</span></span><span class="sentence"><span data-start="1471.0" data-end="1473.0"> Energy Buddy can suit my needs pretty well.</span></span><span class="sentence"><span data-start="1473.0" data-end="1475.0"> I can use it to take a picture, </span></span><span class="sentence"><span data-start="1476.0" data-end="1478.0"> and it will extract the usage information </span></span><span class="sentence"><span data-start="1478.0" data-end="1481.0"> from the picture I take for energy meter, for example.</span></span><span class="sentence"><span data-start="1482.0" data-end="1485.0"> Then it will query the location of my device, </span></span><span class="sentence"><span data-start="1486.0" data-end="1488.0"> get the weather information based on my location, </span></span><span class="sentence"><span data-start="1489.0" data-end="1491.0"> correlate the weather information with my usage, </span></span><span class="sentence"><span data-start="1491.0" data-end="1493.0"> showing up on the screen.</span></span></p><p><span class="sentence"><span data-start="1494.0" data-end="1496.0"> The structure is like this.</span></span><span class="sentence"><span data-start="1496.0" data-end="1501.0"> There is a centralized data manager, and if I import a photo </span></span><span class="sentence"><span data-start="1501.0" data-end="1505.0"> from there, it will try to get a reading from it.</span></span></p><p><span class="sentence"><span data-start="1505.0" data-end="1506.0"> And based on the location, </span></span><span class="sentence"><span data-start="1506.0" data-end="1511.0"> it will try to hit a networking service </span></span><span class="sentence"><span data-start="1511.0" data-end="1514.0"> to get the weather information based on my location.</span></span></p><p><span class="sentence"><span data-start="1515.0" data-end="1517.0"> And then data manager will correlate this information, </span></span><span class="sentence"><span data-start="1517.0" data-end="1520.0"> showing up as a curve on the screen.</span></span><span class="sentence"><span data-start="1521.0" data-end="1524.0"> So next, let's try to give it a shot </span></span><span class="sentence"><span data-start="1524.0" data-end="1527.0"> and see how the new tools can help us identify </span></span><span class="sentence"><span data-start="1527.0" data-end="1529.0"> and improve energy efficiency of Energy Buddy.</span></span><span class="sentence"><span data-start="1529.0" data-end="1534.0"> So on the left-hand side of the screen, you will see Xcode.</span></span></p><p><span class="sentence"><span data-start="1535.0" data-end="1537.0"> Right-hand side is the screenshot of my testing device.</span></span><span class="sentence"><span data-start="1538.0" data-end="1540.0"> So let's start from launching Energy Buddy </span></span><span class="sentence"><span data-start="1541.0" data-end="1542.0"> by opening the project files.</span></span></p><p><span class="sentence"><span data-start="1542.0" data-end="1547.0"> So what it's currently doing is, after I hit the round button, </span></span><span class="sentence"><span data-start="1548.0" data-end="1552.0"> it will try to build a binary file and transport it </span></span><span class="sentence"><span data-start="1552.0" data-end="1554.0"> into the device and launch it for me.</span></span></p><p><span class="sentence"><span data-start="1554.0" data-end="1556.0"> So once it's launched, we will see this.</span></span><span class="sentence"><span data-start="1557.0" data-end="1557.0"> It's here.</span></span><span class="sentence"><span data-start="1558.0" data-end="1563.0"> So let's go to debug navigator over here.</span></span></p><p><span class="sentence"><span data-start="1564.0" data-end="1568.0"> Energy impact over here...oh, there we go.</span></span><span class="sentence"><span data-start="1569.0" data-end="1570.0"> The first thing we want </span></span><span class="sentence"><span data-start="1570.0" data-end="1576.0"> to see is whether there's any moving block over here </span></span><span class="sentence"><span data-start="1577.0" data-end="1578.0"> because currently I don't do anything with the UI.</span></span><span class="sentence"><span data-start="1580.0" data-end="1581.0"> So it seems like it's pretty clear </span></span><span class="sentence"><span data-start="1581.0" data-end="1583.0"> of those kind of moving blocks.</span></span></p><p><span class="sentence"><span data-start="1583.0" data-end="1586.0"> This is a good sign because when the app is idle, </span></span><span class="sentence"><span data-start="1586.0" data-end="1588.0"> not too much should happen.</span></span><span class="sentence"><span data-start="1588.0" data-end="1589.0"> So this is good.</span></span></p><p><span class="sentence"><span data-start="1589.0" data-end="1592.0"> So let me try to import a photo by clicking the </span></span><span class="sentence"><span data-start="1592.0" data-end="1596.0"> "Import Photo" button, select a photo from my gallery.</span></span><span class="sentence"><span data-start="1597.0" data-end="1599.0"> It will try to extract information, </span></span><span class="sentence"><span data-start="1599.0" data-end="1601.0"> and I will set the reading.</span></span><span class="sentence"><span data-start="1602.0" data-end="1606.0"> Okay. Oh, okay, I see lots of activity coming up, </span></span><span class="sentence"><span data-start="1607.0" data-end="1609.0"> including CPU, networking, and location.</span></span></p><p><span class="sentence"><span data-start="1610.0" data-end="1613.0"> But among them, I immediately notice one thing.</span></span><span class="sentence"><span data-start="1614.0" data-end="1616.0"> That is location is always on.</span></span><span class="sentence"><span data-start="1616.0" data-end="1617.0"> Huh. It doesn't make sense.</span></span></p><p><span class="sentence"><span data-start="1618.0" data-end="1621.0"> Because Energy Buddy is not the kind of app where you're trying </span></span><span class="sentence"><span data-start="1621.0" data-end="1623.0"> to track your exercise, like running, right? </span></span><span class="sentence"><span data-start="1624.0" data-end="1626.0"> So why do I need to keep monitoring the location </span></span><span class="sentence"><span data-start="1626.0" data-end="1627.0"> of my device? </span></span><span class="sentence"><span data-start="1627.0" data-end="1628.0"> It doesn't make sense.</span></span><span class="sentence"><span data-start="1629.0" data-end="1633.0"> So let's take a look to see what the location instrument can tell </span></span><span class="sentence"><span data-start="1633.0" data-end="1634.0"> us and how we can identify the line of code </span></span><span class="sentence"><span data-start="1635.0" data-end="1636.0"> to improve the situation.</span></span><span class="sentence"><span data-start="1637.0" data-end="1641.0"> So I will next click the location instrument, </span></span><span class="sentence"><span data-start="1642.0" data-end="1644.0"> and I say restart.</span></span><span class="sentence"><span data-start="1645.0" data-end="1646.0"> Then you are trying to bring </span></span><span class="sentence"><span data-start="1646.0" data-end="1655.0"> up the instrument, launch an app for me.</span></span></p><p><span class="sentence"><span data-start="1655.0" data-end="1658.0"> Okay. So let me redo import photo again.</span></span><span class="sentence"><span data-start="1659.0" data-end="1663.0"> Set the reading.</span></span><span class="sentence"><span data-start="1663.0" data-end="1664.0"> There you go.</span></span></p><p><span class="sentence"><span data-start="1665.0" data-end="1668.0"> Okay. So on the screen, you will see this.</span></span><span class="sentence"><span data-start="1669.0" data-end="1670.0"> This is the location activity.</span></span><span class="sentence"><span data-start="1670.0" data-end="1673.0"> It keeps going on and on without stopping.</span></span></p><p><span class="sentence"><span data-start="1674.0" data-end="1675.0"> But where is it? </span></span><span class="sentence"><span data-start="1675.0" data-end="1678.0"> Where do we introduce this? </span></span><span class="sentence"><span data-start="1678.0" data-end="1680.0"> Take a look at this.</span></span></p><p><span class="sentence"><span data-start="1680.0" data-end="1684.0"> Go to extended detail and see.</span></span><span class="sentence"><span data-start="1684.0" data-end="1689.0"> Oh, okay, it's this part -- request location.</span></span><span class="sentence"><span data-start="1690.0" data-end="1692.0"> That's how we request for location service.</span></span></p><p><span class="sentence"><span data-start="1693.0" data-end="1702.0"> So let me stop this, go back to Xcode, </span></span><span class="sentence"><span data-start="1702.0" data-end="1705.0"> and search for request location.</span></span><span class="sentence"><span data-start="1706.0" data-end="1709.0"> Okay. It's already here.</span></span></p><p><span class="sentence"><span data-start="1709.0" data-end="1712.0"> So what is the request looking to do? </span></span><span class="sentence"><span data-start="1712.0" data-end="1714.0"> First of all, you are trying to set </span></span><span class="sentence"><span data-start="1714.0" data-end="1716.0"> up the confirm view controller.</span></span></p><p><span class="sentence"><span data-start="1720.0" data-end="1722.0"> In this piece of code, you are trying to set up, </span></span><span class="sentence"><span data-start="1722.0" data-end="1724.0"> create a location manager.</span></span><span class="sentence"><span data-start="1725.0" data-end="1728.0"> Then you are will call start updating location.</span></span></p><p><span class="sentence"><span data-start="1729.0" data-end="1733.0"> So after this line, what will happen is location service will </span></span><span class="sentence"><span data-start="1733.0" data-end="1736.0"> periodically push the location update to us </span></span><span class="sentence"><span data-start="1736.0" data-end="1740.0"> through a callback, which is over here.</span></span></p><p><span class="sentence"><span data-start="1742.0" data-end="1744.0"> So in the callback, let's take a look -- what does it do? </span></span><span class="sentence"><span data-start="1745.0" data-end="1748.0"> First thing is you are trying to see, okay, </span></span><span class="sentence"><span data-start="1748.0" data-end="1751.0"> if there is anything updated here, if it's zero, </span></span><span class="sentence"><span data-start="1751.0" data-end="1754.0"> that's invalid, so we just ignore it, return.</span></span><span class="sentence"><span data-start="1755.0" data-end="1757.0"> Then we will store it, we say, </span></span><span class="sentence"><span data-start="1757.0" data-end="1761.0"> whether location is horizontal accuracy is actually </span></span><span class="sentence"><span data-start="1761.0" data-end="1762.0"> up to our standard, up to our expectation.</span></span><span class="sentence"><span data-start="1762.0" data-end="1764.0"> If not, we return.</span></span><span class="sentence"><span data-start="1765.0" data-end="1766.0"> If so, then we are trying </span></span><span class="sentence"><span data-start="1766.0" data-end="1770.0"> to handle location inside the confirm view controller.</span></span><span class="sentence"><span data-start="1770.0" data-end="1771.0"> And then you return.</span></span><span class="sentence"><span data-start="1772.0" data-end="1775.0"> And this callback routine will be repeated again and again </span></span><span class="sentence"><span data-start="1775.0" data-end="1778.0"> and again, every time when we receive a callback </span></span><span class="sentence"><span data-start="1778.0" data-end="1779.0"> from the location service.</span></span><span class="sentence"><span data-start="1780.0" data-end="1781.0"> Push doesn't look nice.</span></span></p><p><span class="sentence"><span data-start="1781.0" data-end="1782.0"> So what we should do? </span></span><span class="sentence"><span data-start="1783.0" data-end="1785.0"> The thing we should do is we should stop it </span></span><span class="sentence"><span data-start="1786.0" data-end="1787.0"> when we have a value.</span></span></p><p><span class="sentence"><span data-start="1788.0" data-end="1791.0"> Like this line.</span></span><span class="sentence"><span data-start="1791.0" data-end="1796.0"> So we say when we get a value updating -- </span></span><span class="sentence"><span data-start="1796.0" data-end="1799.0"> location update, we should stop it.</span></span></p><p><span class="sentence"><span data-start="1800.0" data-end="1802.0"> So let's take a look and launch it again </span></span><span class="sentence"><span data-start="1803.0" data-end="1805.0"> and see what the energy gauge can tell us.</span></span><span class="sentence"><span data-start="1805.0" data-end="1809.0"> What I expect to see is after I receive the first time a </span></span><span class="sentence"><span data-start="1809.0" data-end="1812.0"> successful location update, I should stop the location, </span></span><span class="sentence"><span data-start="1812.0" data-end="1814.0"> and location service should not be on and on forever.</span></span><span class="sentence"><span data-start="1815.0" data-end="1818.0"> Let's wait for it to be launched.</span></span></p><p><span class="sentence"><span data-start="1825.0" data-end="1825.0"> Hmmm.</span></span><span class="sentence"><span data-start="1827.0" data-end="1831.0"> Okay. Go to the iOS energy gauge.</span></span><span class="sentence"><span data-start="1832.0" data-end="1834.0"> So let me try to import a photo again.</span></span></p><p><span class="sentence"><span data-start="1835.0" data-end="1837.0"> Select a photo from a gallery.</span></span><span class="sentence"><span data-start="1838.0" data-end="1839.0"> Set a reading.</span></span><span class="sentence"><span data-start="1840.0" data-end="1843.0"> Okay. Location, one second, two seconds, three seconds, </span></span><span class="sentence"><span data-start="1843.0" data-end="1845.0"> four seconds, and it's gone.</span></span><span class="sentence"><span data-start="1846.0" data-end="1849.0"> This is an immediate improvement after just one line of code.</span></span><span class="sentence"><span data-start="1850.0" data-end="1852.0"> You can think about the scenario over here.</span></span></p><p><span class="sentence"><span data-start="1853.0" data-end="1856.0"> So if the app has been turned on for a long time, </span></span><span class="sentence"><span data-start="1856.0" data-end="1859.0"> imagine how much energy you can save just by doing one line </span></span><span class="sentence"><span data-start="1859.0" data-end="1861.0"> of code, which is amazing.</span></span></p><p><span class="sentence"><span data-start="1862.0" data-end="1866.0"> So let's give more try on Energy Buddy </span></span><span class="sentence"><span data-start="1866.0" data-end="1869.0"> to see what will happen next time when we import another one.</span></span><span class="sentence"><span data-start="1870.0" data-end="1873.0"> Okay. I import another one.</span></span></p><p><span class="sentence"><span data-start="1873.0" data-end="1877.0"> And I see the location has been up for four seconds, </span></span><span class="sentence"><span data-start="1878.0" data-end="1881.0"> but this time, I notice the big thing here is </span></span><span class="sentence"><span data-start="1882.0" data-end="1883.0"> networking service.</span></span></p><p><span class="sentence"><span data-start="1884.0" data-end="1885.0"> This doesn't look nice.</span></span><span class="sentence"><span data-start="1886.0" data-end="1889.0"> The reason Energy Buddy wants to hit the networking service </span></span><span class="sentence"><span data-start="1889.0" data-end="1891.0"> because it wants to get the weather information.</span></span></p><p><span class="sentence"><span data-start="1891.0" data-end="1894.0"> But I just did a query like two minutes ago, </span></span><span class="sentence"><span data-start="1895.0" data-end="1896.0"> so the weather shouldn't change </span></span><span class="sentence"><span data-start="1896.0" data-end="1899.0"> that much during the past two minutes, right? </span></span><span class="sentence"><span data-start="1900.0" data-end="1902.0"> Even for an hour, I would say, </span></span><span class="sentence"><span data-start="1902.0" data-end="1904.0"> the weather may not change that much.</span></span><span class="sentence"><span data-start="1904.0" data-end="1906.0"> So what is the purpose if we want </span></span><span class="sentence"><span data-start="1906.0" data-end="1909.0"> to redo the networking although we already have earlier request </span></span><span class="sentence"><span data-start="1909.0" data-end="1910.0"> that is two minutes ago? </span></span><span class="sentence"><span data-start="1911.0" data-end="1916.0"> So let's go directly to the code and see how we can fix this.</span></span></p><p><span class="sentence"><span data-start="1916.0" data-end="1918.0"> So the place where we actually request </span></span><span class="sentence"><span data-start="1918.0" data-end="1922.0"> for location is inside the weather file.</span></span><span class="sentence"><span data-start="1922.0" data-end="1925.0"> And there's a function called Fetch if Missing.</span></span></p><p><span class="sentence"><span data-start="1926.0" data-end="1927.0"> So let's take a look what does it do.</span></span><span class="sentence"><span data-start="1929.0" data-end="1931.0"> In the first part, we were trying to set some parameters </span></span><span class="sentence"><span data-start="1931.0" data-end="1936.0"> like date, URL based on the query URL for -- </span></span><span class="sentence"><span data-start="1936.0" data-end="1938.0"> based on the device location and the current date -- </span></span><span class="sentence"><span data-start="1939.0" data-end="1940.0"> and whether I have done this kind </span></span><span class="sentence"><span data-start="1940.0" data-end="1942.0"> of query within today or not.</span></span></p><p><span class="sentence"><span data-start="1942.0" data-end="1946.0"> And you will store the source ID for the location coordinate, </span></span><span class="sentence"><span data-start="1946.0" data-end="1950.0"> and you will set a constant that is exactly the number </span></span><span class="sentence"><span data-start="1950.0" data-end="1952.0"> of seconds within the hour.</span></span></p><p><span class="sentence"><span data-start="1953.0" data-end="1955.0"> So the first if we are try to go do is we say </span></span><span class="sentence"><span data-start="1955.0" data-end="1957.0"> if we have done the query for today </span></span><span class="sentence"><span data-start="1958.0" data-end="1962.0"> and the data manager already has the weather fetched </span></span><span class="sentence"><span data-start="1962.0" data-end="1964.0"> since the last time we queried, that is like three minutes ago, </span></span><span class="sentence"><span data-start="1965.0" data-end="1968.0"> then we say we just return.</span></span><span class="sentence"><span data-start="1969.0" data-end="1972.0"> Next is if we don't do it today </span></span><span class="sentence"><span data-start="1973.0" data-end="1975.0"> and data manager already has the weather fetched, </span></span><span class="sentence"><span data-start="1975.0" data-end="1976.0"> then we also return.</span></span><span class="sentence"><span data-start="1977.0" data-end="1982.0"> If none of these two situations have been satisfied, </span></span><span class="sentence"><span data-start="1982.0" data-end="1988.0"> then we will try to set up a task based on the location, </span></span><span class="sentence"><span data-start="1988.0" data-end="1992.0"> based on the date, and we will try to download it over here.</span></span><span class="sentence"><span data-start="1993.0" data-end="1994.0"> So what's going wrong there? </span></span><span class="sentence"><span data-start="1995.0" data-end="2000.0"> The reason it's doing wrong is actually inside this gauge </span></span><span class="sentence"><span data-start="2000.0" data-end="2001.0"> over here.</span></span><span class="sentence"><span data-start="2001.0" data-end="2007.0"> So I will add in another situation like this, </span></span><span class="sentence"><span data-start="2007.0" data-end="2009.0"> to say if I have done this today </span></span><span class="sentence"><span data-start="2009.0" data-end="2013.0"> and the previous fetch is actually within an hour, </span></span><span class="sentence"><span data-start="2013.0" data-end="2014.0"> then I will not do it again.</span></span></p><p><span class="sentence"><span data-start="2016.0" data-end="2020.0"> So let's launch it again and see how we can see the improvement </span></span><span class="sentence"><span data-start="2020.0" data-end="2022.0"> inside energy gauge.</span></span><span class="sentence"><span data-start="2023.0" data-end="2024.0"> So what we expect to see is this.</span></span></p><p><span class="sentence"><span data-start="2025.0" data-end="2028.0"> Because we've already done our fetch, like five minutes ago, </span></span><span class="sentence"><span data-start="2029.0" data-end="2032.0"> we should not see any networking every time when we are trying </span></span><span class="sentence"><span data-start="2032.0" data-end="2034.0"> to import a photo again within the next hour.</span></span></p><p><span class="sentence"><span data-start="2035.0" data-end="2037.0"> Let's take a look whether energy gauge will agree </span></span><span class="sentence"><span data-start="2037.0" data-end="2038.0"> with my theory here.</span></span><span class="sentence"><span data-start="2041.0" data-end="2042.0"> Okay. It's up.</span></span></p><p><span class="sentence"><span data-start="2043.0" data-end="2048.0"> So I am trying to import a photo, </span></span><span class="sentence"><span data-start="2050.0" data-end="2054.0"> select a picture from a gallery.</span></span><span class="sentence"><span data-start="2055.0" data-end="2057.0"> Set the reading.</span></span></p><p><span class="sentence"><span data-start="2057.0" data-end="2059.0"> So I see the location.</span></span><span class="sentence"><span data-start="2059.0" data-end="2061.0"> It's been for four seconds like before.</span></span><span class="sentence"><span data-start="2062.0" data-end="2064.0"> But magically, all the networking is gone.</span></span></p><p><span class="sentence"><span data-start="2064.0" data-end="2067.0"> This is exactly what we expect.</span></span><span class="sentence"><span data-start="2067.0" data-end="2069.0"> So this is another good way </span></span><span class="sentence"><span data-start="2069.0" data-end="2072.0"> for the energy efficiency of our Energy Buddy.</span></span></p><p><span class="sentence"><span data-start="2073.0" data-end="2075.0"> So besides the foreground, </span></span><span class="sentence"><span data-start="2075.0" data-end="2079.0"> Energy Buddy can also consume significant battery even </span></span><span class="sentence"><span data-start="2079.0" data-end="2081.0"> on the background.</span></span></p><p><span class="sentence"><span data-start="2081.0" data-end="2085.0"> So let's take a look at what the energy gauge can tell us </span></span><span class="sentence"><span data-start="2085.0" data-end="2087.0"> when Energy Buddy is actually on the background.</span></span><span class="sentence"><span data-start="2087.0" data-end="2089.0"> We put Energy Buddy in the background </span></span><span class="sentence"><span data-start="2089.0" data-end="2093.0"> by hitting the Home button.</span></span><span class="sentence"><span data-start="2095.0" data-end="2100.0"> So what we see is over here.</span></span><span class="sentence"><span data-start="2102.0" data-end="2103.0"> We see lots of, lots </span></span><span class="sentence"><span data-start="2103.0" data-end="2107.0"> of background activities of Energy Buddy.</span></span><span class="sentence"><span data-start="2108.0" data-end="2112.0"> And that means that whenever Energy Buddy is </span></span><span class="sentence"><span data-start="2112.0" data-end="2117.0"> on the background, the device cannot go to sleep, </span></span><span class="sentence"><span data-start="2117.0" data-end="2118.0"> which will consume significant power </span></span><span class="sentence"><span data-start="2118.0" data-end="2121.0"> because there is a fixed cost to keep the device awake.</span></span><span class="sentence"><span data-start="2122.0" data-end="2125.0"> This doesn't make sense because Energy Buddy doesn't need </span></span><span class="sentence"><span data-start="2125.0" data-end="2126.0"> to do anything on the background.</span></span><span class="sentence"><span data-start="2127.0" data-end="2129.0"> So what's going wrong here? </span></span><span class="sentence"><span data-start="2129.0" data-end="2133.0"> Let us go to the callback </span></span><span class="sentence"><span data-start="2134.0" data-end="2137.0"> when we actually go to the background.</span></span><span class="sentence"><span data-start="2137.0" data-end="2139.0"> Here is the code.</span></span><span class="sentence"><span data-start="2139.0" data-end="2141.0"> What does it do? </span></span><span class="sentence"><span data-start="2143.0" data-end="2143.0"> It does the following.</span></span><span class="sentence"><span data-start="2143.0" data-end="2146.0"> You are trying to set out background task identifier, </span></span><span class="sentence"><span data-start="2146.0" data-end="2150.0"> and they will do one thing, archive to data manager, </span></span><span class="sentence"><span data-start="2150.0" data-end="2153.0"> which will store all the changes to data manager, </span></span><span class="sentence"><span data-start="2153.0" data-end="2157.0"> and they will say wait for input, and we will code </span></span><span class="sentence"><span data-start="2157.0" data-end="2159.0"> in background task when it is actually done.</span></span></p><p><span class="sentence"><span data-start="2159.0" data-end="2161.0"> Does it make sense? </span></span><span class="sentence"><span data-start="2162.0" data-end="2163.0"> No. Why not? </span></span><span class="sentence"><span data-start="2164.0" data-end="2167.0"> Because our app is always on in the background, right? </span></span><span class="sentence"><span data-start="2167.0" data-end="2170.0"> So how come users can actually interact </span></span><span class="sentence"><span data-start="2170.0" data-end="2171.0"> with Energy Buddies through the UI? </span></span><span class="sentence"><span data-start="2172.0" data-end="2176.0"> So there has been no input at all, and we are waiting for it.</span></span></p><p><span class="sentence"><span data-start="2176.0" data-end="2177.0"> This doesn't look nice.</span></span><span class="sentence"><span data-start="2178.0" data-end="2185.0"> So what we should do is we shouldn't wait for it.</span></span><span class="sentence"><span data-start="2186.0" data-end="2191.0"> Instead, we should do something like this.</span></span></p><p><span class="sentence"><span data-start="2192.0" data-end="2196.0"> After we archive the data to data manager, we will call </span></span><span class="sentence"><span data-start="2196.0" data-end="2197.0"> in background task immediately </span></span><span class="sentence"><span data-start="2198.0" data-end="2202.0"> and invalidate the background task identifier.</span></span></p><p><span class="sentence"><span data-start="2202.0" data-end="2205.0"> Again, let's launch Energy Buddy again </span></span><span class="sentence"><span data-start="2205.0" data-end="2208.0"> and see what the energy gauge can tell us.</span></span><span class="sentence"><span data-start="2209.0" data-end="2210.0"> What we expect is this.</span></span></p><p><span class="sentence"><span data-start="2210.0" data-end="2214.0"> After we just saw all the changes in data manager, </span></span><span class="sentence"><span data-start="2214.0" data-end="2217.0"> it will directly just quit itself </span></span><span class="sentence"><span data-start="2217.0" data-end="2218.0"> and release the control to the assistant.</span></span></p><p><span class="sentence"><span data-start="2219.0" data-end="2219.0"> It will not stay </span></span><span class="sentence"><span data-start="2219.0" data-end="2227.0"> in the background all the time like before.</span></span><span class="sentence"><span data-start="2227.0" data-end="2230.0"> Okay. Go to energy gauge.</span></span></p><p><span class="sentence"><span data-start="2231.0" data-end="2234.0"> Put the Energy Buddy in the background.</span></span><span class="sentence"><span data-start="2236.0" data-end="2237.0"> So we are in the background one second, </span></span><span class="sentence"><span data-start="2237.0" data-end="2241.0"> two seconds, and it's gone.</span></span></p><p><span class="sentence"><span data-start="2241.0" data-end="2242.0"> So this is another big win.</span></span><span class="sentence"><span data-start="2243.0" data-end="2247.0"> So keep in mind that, with very simple fix like I just did </span></span><span class="sentence"><span data-start="2247.0" data-end="2250.0"> on the stage, you can see significant improvements, </span></span><span class="sentence"><span data-start="2250.0" data-end="2253.0"> and Abhinav will introduce you because we carry </span></span><span class="sentence"><span data-start="2253.0" data-end="2256.0"> on a couple hours or even a day </span></span><span class="sentence"><span data-start="2256.0" data-end="2258.0"> with significant battery improvement.</span></span></p><p><span class="sentence"><span data-start="2259.0" data-end="2262.0"> So this concludes my demo, and let me hand it back to Abhinav.</span></span><span class="sentence"><span data-start="2263.0" data-end="2267.0"> </span></span><span class="sentence"><span data-start="2268.0" data-end="2269.0">  ABHINAV PATHAK: Thank you, Pai-Han.</span></span></p><p><span class="sentence"><span data-start="2269.0" data-end="2271.0"> That was a great demo.</span></span><span class="sentence"><span data-start="2271.0" data-end="2272.0"> Back on the slides.</span></span><span class="sentence"><span data-start="2272.0" data-end="2273.0"> So let's conclude this talk.</span></span></p><p><span class="sentence"><span data-start="2273.0" data-end="2275.0"> Let's see what happened during this demo, a quick summary.</span></span><span class="sentence"><span data-start="2275.0" data-end="2278.0"> We started with the Energy Buddy, inefficient code.</span></span><span class="sentence"><span data-start="2278.0" data-end="2282.0"> We ran it as the user would use it and let's see what happened.</span></span></p><p><span class="sentence"><span data-start="2282.0" data-end="2283.0"> Everything is lighted here.</span></span><span class="sentence"><span data-start="2283.0" data-end="2286.0"> Bad, bad, really bad, the impact is very high, </span></span><span class="sentence"><span data-start="2287.0" data-end="2289.0"> and your app will come very high in the battery UI.</span></span></p><p><span class="sentence"><span data-start="2289.0" data-end="2290.0"> How did we fix it? </span></span><span class="sentence"><span data-start="2290.0" data-end="2296.0"> We went to location, and we said hey, location has started.</span></span><span class="sentence"><span data-start="2296.0" data-end="2296.0"> Then stop.</span></span></p><p><span class="sentence"><span data-start="2297.0" data-end="2299.0"> One line of change, boom, location stops.</span></span><span class="sentence"><span data-start="2300.0" data-end="2302.0"> Let's see before and after how does it look? </span></span><span class="sentence"><span data-start="2303.0" data-end="2306.0"> If you focus on location timeline, </span></span><span class="sentence"><span data-start="2306.0" data-end="2308.0"> we see location is on all the time.</span></span><span class="sentence"><span data-start="2309.0" data-end="2311.0"> Afterwards, location is on only </span></span><span class="sentence"><span data-start="2311.0" data-end="2314.0"> when it is actually required whenever a photo is imported.</span></span></p><p><span class="sentence"><span data-start="2315.0" data-end="2316.0"> Let's go to networking.</span></span><span class="sentence"><span data-start="2316.0" data-end="2320.0"> What we did was we were getting weather information all the time </span></span><span class="sentence"><span data-start="2320.0" data-end="2323.0"> whenever a new photo was imported, and that is not good.</span></span></p><p><span class="sentence"><span data-start="2323.0" data-end="2325.0"> We wanted to cut down the transfer, </span></span><span class="sentence"><span data-start="2325.0" data-end="2326.0"> and we put a very simple block.</span></span><span class="sentence"><span data-start="2326.0" data-end="2329.0"> Hey, if this is recently called, don't do that.</span></span></p><p><span class="sentence"><span data-start="2330.0" data-end="2331.0"> We don't need the new information again.</span></span><span class="sentence"><span data-start="2332.0" data-end="2334.0"> What impact did that have on the energy gauge? </span></span><span class="sentence"><span data-start="2335.0" data-end="2337.0"> Two photos, again, before and after.</span></span></p><p><span class="sentence"><span data-start="2337.0" data-end="2339.0"> And if you focus on the networking part, </span></span><span class="sentence"><span data-start="2339.0" data-end="2341.0"> networking is highlighted for a long time.</span></span><span class="sentence"><span data-start="2342.0" data-end="2344.0"> The red bars on the top are highlighted all the time, </span></span><span class="sentence"><span data-start="2344.0" data-end="2346.0"> saying networking hardware is up.</span></span><span class="sentence"><span data-start="2346.0" data-end="2349.0"> It's a huge amount of time during the usage of the app.</span></span><span class="sentence"><span data-start="2349.0" data-end="2352.0"> At the bottom, we just do networking once, boom, </span></span><span class="sentence"><span data-start="2352.0" data-end="2355.0"> after that, it's recently called, it won't be done again.</span></span><span class="sentence"><span data-start="2356.0" data-end="2359.0"> What about the background session? </span></span><span class="sentence"><span data-start="2360.0" data-end="2363.0"> When we went to background, we stored our state into database </span></span><span class="sentence"><span data-start="2363.0" data-end="2365.0"> and said hey, let's wait for the user input.</span></span><span class="sentence"><span data-start="2366.0" data-end="2367.0"> Not a good place to do.</span></span><span class="sentence"><span data-start="2367.0" data-end="2369.0"> User is in the going to do any input at that point.</span></span></p><p><span class="sentence"><span data-start="2370.0" data-end="2371.0"> Very simple fix.</span></span><span class="sentence"><span data-start="2371.0" data-end="2373.0"> We say don't wait for user input.</span></span><span class="sentence"><span data-start="2373.0" data-end="2374.0"> Just call the task completion handler.</span></span></p><p><span class="sentence"><span data-start="2375.0" data-end="2377.0"> Tell the system hey, I am done, suspend me, </span></span><span class="sentence"><span data-start="2377.0" data-end="2380.0"> let the system go to sleep.</span></span><span class="sentence"><span data-start="2380.0" data-end="2382.0"> How does energy gauge look like before and after? </span></span><span class="sentence"><span data-start="2382.0" data-end="2384.0"> Let's focus on the background line.</span></span><span class="sentence"><span data-start="2384.0" data-end="2387.0"> Background is up all the time in the top.</span></span><span class="sentence"><span data-start="2387.0" data-end="2390.0"> At the bottom, the moment we have done the archiving </span></span><span class="sentence"><span data-start="2390.0" data-end="2393.0"> to the database, the background task is done.</span></span><span class="sentence"><span data-start="2393.0" data-end="2394.0"> We are suspended.</span></span><span class="sentence"><span data-start="2395.0" data-end="2399.0"> Awesome. Let's take a look at overall code before and after.</span></span></p><p><span class="sentence"><span data-start="2400.0" data-end="2402.0"> Before, you see everything lighted up.</span></span><span class="sentence"><span data-start="2402.0" data-end="2405.0"> If this is happening to your app, this is a problem.</span></span><span class="sentence"><span data-start="2406.0" data-end="2408.0"> After is we are doing the same utility, </span></span><span class="sentence"><span data-start="2408.0" data-end="2412.0"> we are giving the same utility to the user, same experience, </span></span><span class="sentence"><span data-start="2412.0" data-end="2415.0"> but very, very little amount of load </span></span><span class="sentence"><span data-start="2415.0" data-end="2416.0"> on the hardware in terms of energy.</span></span></p><p><span class="sentence"><span data-start="2418.0" data-end="2421.0"> Probably the most important slide, as we promised you </span></span><span class="sentence"><span data-start="2421.0" data-end="2423.0"> in the starting, if your app is coming at the top, </span></span><span class="sentence"><span data-start="2424.0" data-end="2427.0"> please do the changes and you will see your app actually going </span></span><span class="sentence"><span data-start="2427.0" data-end="2428.0"> at the bottom of the UI.</span></span><span class="sentence"><span data-start="2428.0" data-end="2431.0"> What we did, we took two iPhone 6 fresh installs, </span></span><span class="sentence"><span data-start="2432.0" data-end="2434.0"> on one of them installed inefficient code, </span></span><span class="sentence"><span data-start="2434.0" data-end="2437.0"> on the second installed the code with all the fixes, </span></span><span class="sentence"><span data-start="2437.0" data-end="2440.0"> took both of them exact same amount of work, </span></span><span class="sentence"><span data-start="2440.0" data-end="2443.0"> while running other applications as well, same amount of load </span></span><span class="sentence"><span data-start="2443.0" data-end="2445.0"> in terms of all application, in terms of Energy Buddy </span></span><span class="sentence"><span data-start="2445.0" data-end="2446.0"> and other applications.</span></span><span class="sentence"><span data-start="2447.0" data-end="2453.0"> What we found: the fixed code consumed 50 percent less energy, </span></span><span class="sentence"><span data-start="2454.0" data-end="2455.0"> including display energy, </span></span><span class="sentence"><span data-start="2456.0" data-end="2457.0"> which is exactly the same in both the apps.</span></span><span class="sentence"><span data-start="2459.0" data-end="2462.0"> Battery UI you see right on the top, 28 percent.</span></span></p><p><span class="sentence"><span data-start="2462.0" data-end="2466.0"> And with optimized code, it goes way down.</span></span><span class="sentence"><span data-start="2466.0" data-end="2469.0"> User is getting exactly the same thing.</span></span><span class="sentence"><span data-start="2470.0" data-end="2475.0"> To summarize this talk, battery life is really, really important </span></span><span class="sentence"><span data-start="2475.0" data-end="2477.0"> to have a good customer experience.</span></span><span class="sentence"><span data-start="2478.0" data-end="2480.0"> Design your app with three things in mind -- </span></span><span class="sentence"><span data-start="2480.0" data-end="2483.0"> do it never/do it less, do it more efficiently, </span></span><span class="sentence"><span data-start="2483.0" data-end="2485.0"> do it at a better time.</span></span><span class="sentence"><span data-start="2486.0" data-end="2488.0"> Be a very considerate background application.</span></span><span class="sentence"><span data-start="2489.0" data-end="2491.0"> Please try out the new debug tools.</span></span></p><p><span class="sentence"><span data-start="2491.0" data-end="2492.0"> We have our labs.</span></span><span class="sentence"><span data-start="2492.0" data-end="2493.0"> I will give details right now.</span></span><span class="sentence"><span data-start="2494.0" data-end="2495.0"> Check out the new Energy Guide we have.</span></span></p><p><span class="sentence"><span data-start="2495.0" data-end="2497.0"> It contains all the information we talked </span></span><span class="sentence"><span data-start="2497.0" data-end="2499.0"> about in this talk and more.</span></span><span class="sentence"><span data-start="2500.0" data-end="2501.0"> Bring your apps to the Power Lab.</span></span></p><p><span class="sentence"><span data-start="2503.0" data-end="2504.0"> Some more information </span></span><span class="sentence"><span data-start="2504.0" data-end="2506.0"> about where you can find the Energy Guides.</span></span><span class="sentence"><span data-start="2508.0" data-end="2509.0"> Technical support for this talk.</span></span></p><p><span class="sentence"><span data-start="2511.0" data-end="2513.0"> Finally, the related sessions for these talks, </span></span><span class="sentence"><span data-start="2513.0" data-end="2516.0"> which are talking about a few concepts we talked, </span></span><span class="sentence"><span data-start="2516.0" data-end="2517.0"> but in more detail.</span></span></p><p><span class="sentence"><span data-start="2518.0" data-end="2519.0"> Thank you, everyone, for coming.</span></span><span class="sentence"><span data-start="2521.0" data-end="2534.0"> </span></span></p>
							</section>
						</li>

						<!-- search -->
						<li class="supplement search active" data-supplement-id="search">

							<section class="transcript-results-summary">
								<p class="message smaller lighter"><!-- to be populated --></p>
								<p class="instructions smaller lighter text-center">Looking for something specific? Enter a topic above and jump straight to the good stuff.</p>
								<p class="error smaller lighter italic text-center" style="display:none;">An error occurred when submitting your query. Please check your Internet connection and try again.</p>
							</section>

							<!-- search results -->
							<ul class="transcript-results row">
															</ul>

						</li>

					</ul>

				</section>

			</section>

		</section>

		<input id="analytics-meta" type="hidden" data-event-name="WWDC 2015" 
		data-event-id="wwdc2015-708" 
		data-session-id="708" 
		data-video-name="Debugging Energy Issues" 
		data-session-response-id="">
	</main>

	<div id="globalfooter-wrapper">
		<footer id="globalfooter" role="contentinfo">
			<nav class="footer-breadory">
				<a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
				<section class="breadcrumbs">
					<ol class="breadcrumbs-list">
						<li><a href="/videos/">Videos</a></li>
						<li><a href="/videos/wwdc2015/">WWDC 2015</a></li>						<li>Debugging Energy Issues</li>
					</ol>
				</section>
				<div id="directorynav" class="directorynav">
	<div id="dn-cola" class="column">
		<h3><a href="/discover/">Discover</a></h3>
		<ul>
			<li><a href="/macos/">macOS</a></li>
			<li><a href="/ios/">iOS</a></li>
			<li><a href="/watchos/">watchOS</a></li>
			<li><a href="/tvos/">tvOS</a></li>
			<li><a href="/safari/">Safari and Web</a></li>
			<li><a href="/games/">Games</a></li>
			<li><a href="/business/">Business</a></li>
			<li><a href="/education/">Education</a></li>
			<li><a href="/wwdc/">WWDC</a></li>
		</ul>
	</div>
	<div id="dn-colb" class="column">
		<h3><a href="/design/">Design</a></h3>
		<ul>
			<li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
			<li><a href="/design/resources/">Resources</a></li>
			<li><a href="/videos/design/">Videos</a></li>
			<li><a href="/design/awards/">Apple Design Awards</a></li>
			<li><a href="/accessibility/">Accessibility</a></li>
			<li><a href="/internationalization/">Internationalization</a></li>
			<li><a href="/accessories/">Accessories</a></li>
		</ul>
	</div>
	<div id="dn-colc" class="column">
		<h3><a href="/develop/">Develop</a></h3>
		<ul>
			<li><a href="/xcode/">Xcode</a></li>
			<li><a href="/swift/">Swift</a></li>
			<li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
			<li><a href="/testflight/">TestFlight</a></li>
			<li><a href="/documentation/">Documentation</a></li>
			<li><a href="/videos/">Videos</a></li>
			<li><a href="/download/">Downloads</a></li>
		</ul>
	</div>
	<div id="dn-cold" class="column">
		<h3><a href="/distribute/">Distribute</a></h3>
		<ul>
			<li><a href="/programs/">Developer Program</a></li>
			<li><a href="/app-store/">App Store</a></li>
			<li><a href="/app-store/review/">App Review</a></li>
			<li><a href="/macos/distribution/">Mac Software</a></li>
			<li><a href="/business/distribute/">Apps for Business</a></li>
			<li><a href="/safari/extensions/">Safari Extensions</a></li>
			<li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
			<li><a href="/softwarelicensing/">Trademark Licensing</a></li>
		</ul>
	</div>
	<div id="dn-cole" class="column">
		<h3><a href="/support/">Support</a></h3>
		<ul>
			<li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
			<li><a href="/bug-reporting/">Bug Reporting</a></li>
			<li><a href="/terms/">License Agreements</a></li>
			<li><a href="/system-status/">System Status</a></li>
			<li><a href="/contact/">Contact Us</a></li>
		</ul>
		<h3><a href="/account/">Account</a></h3>
		<ul>
			<li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
			<li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
		</ul>
	</div>
</div>

			</nav>
			<div class="ac-gf-footer-legal">
  <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>. </div>
  <div class="ac-gf-footer-legal-copyright">Copyright ©  2019 Apple Inc. All rights reserved.</div>
  <div class="ac-gf-footer-legal-links">
    <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
    <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
    <a href="/bug-reporting/">Report Bugs</a>
    <a href="/contact/submit/?subject=website-feedback">Feedback</a>
  </div>
  <div class="ac-gf-footer-language-links">
    <a href="/cn/" lang="zh" class="first">简体中文</a>
    <a href="/jp/" lang="ja">日本語</a>
    <a href="/kr/" lang="ko">한국어</a>
  </div>
</div>

		</footer>
	</div>

	<script src="/assets/scripts/params.js"></script>
	<script src="/assets/scripts/watchable.js"></script>
	<script src="/assets/scripts/timeout.js"></script>

	<script src="/videos/scripts/play/play.js?2"></script>
	<script src="/videos/scripts/hls/hls.min.js"></script>
	
</body>
</html>